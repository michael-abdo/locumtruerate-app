<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recruiter Dashboard - LocumTrueRate</title>
    <style>
        /* CSS Variables from Design System */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --accent-color: #10b981;
            --background-color: #f8fafc;
            --surface-color: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --border-light: #f1f5f9;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background-color);
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Global focus styles for accessibility */
        *:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Specific focus styles for buttons and form elements */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus,
        a:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Modal-specific focus styles */
        .compose-modal button:focus,
        .compose-modal input:focus,
        .compose-modal select:focus,
        .compose-modal textarea:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            position: relative;
            z-index: 1;
        }

        /* Remove default browser outline */
        *:focus:not(:focus-visible) {
            outline: none;
        }

        /* Focus visible for keyboard navigation only */
        *:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Navigation */
        .navbar {
            background-color: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand h2 {
            color: var(--primary-color);
            font-weight: 700;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-link:hover {
            color: var(--primary-color);
        }
        
        .nav-link.active {
            color: var(--primary-color);
            font-weight: 600;
            background-color: rgba(37, 99, 235, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
        }

        .nav-dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-5px);
            transition: all 0.2s ease-in-out;
            z-index: 1000;
            margin-top: 0;
            pointer-events: none;
        }

        .nav-dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            pointer-events: auto;
        }
        .nav-dropdown::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            height: 10px;
            background: transparent;
            z-index: 999;
        }

        .dropdown-menu li {
            list-style: none;
        }

        .dropdown-menu a {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            text-decoration: none;
            transition: background-color 0.2s;
        }

        .dropdown-menu a:hover {
            background-color: var(--background-color);
            color: var(--primary-color);
        }

        .dropdown-menu a.active {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .dropdown-menu a.active:hover {
            background-color: var(--primary-hover);
            color: white;
        }

        /* Profile Dropdown Styles */
        .profile-dropdown {
            margin-left: auto;
        }

        .profile-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }

        .profile-link:hover {
            background-color: var(--background-color);
        }

        .profile-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .dropdown-arrow {
            font-size: 0.7rem;
            transition: transform 0.2s ease;
        }

        .profile-dropdown:hover .dropdown-arrow {
            transform: rotate(180deg);
        }

        .profile-menu {
            right: 0;
            left: auto;
            min-width: 280px;
            padding: 0;
        }

        .profile-info {
            padding: 1rem 1.5rem;
            background: var(--background-color);
            border-bottom: 1px solid var(--border-color);
        }

        .profile-info-content {
            text-align: left;
        }

        .profile-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .profile-role {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .profile-company {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .menu-divider {
            height: 1px;
            background: var(--border-color);
            margin: 0.5rem 0;
        }

        .profile-menu li a {
            display: block;
            padding: 0.75rem 1.5rem;
            color: var(--text-primary);
            text-decoration: none;
            transition: background-color 0.2s ease;
            font-size: 0.9rem;
        }

        .profile-menu li a:hover {
            background-color: var(--background-color);
        }

        .logout-link {
            color: var(--error-color) !important;
        }

        .logout-link:hover {
            background-color: rgba(239, 68, 68, 0.1) !important;
        }

        /* Profile dropdown visibility control */
        .profile-menu {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-5px);
        }

        .profile-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* Layout */
        .page-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            padding: 2rem 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Dashboard Header */
        .dashboard-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-hover) 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .header-info h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header-info p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary:hover {
            background-color: #059669;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: transparent;
            color: white;
            padding: 0.75rem 1.5rem;
            border: 2px solid white;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            display: inline-block;
        }

        .btn-secondary:hover {
            background-color: white;
            color: var(--primary-color);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background-color: var(--surface-color);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-left: 4px solid var(--border-color);
            transition: all 0.2s ease-in-out;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .stat-card.primary {
            border-left-color: var(--primary-color);
        }

        .stat-card.success {
            border-left-color: var(--success-color);
        }

        .stat-card.warning {
            border-left-color: var(--warning-color);
        }

        .stat-card.accent {
            border-left-color: var(--accent-color);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .stat-change {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .stat-change.positive {
            color: var(--success-color);
        }

        .stat-change.negative {
            color: var(--error-color);
        }

        /* Dashboard Sections */
        .dashboard-section {
            background-color: var(--surface-color);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .section-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
        }

        .btn-small.primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-small.secondary {
            background-color: var(--background-color);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        /* Job Listings Table */
        .jobs-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .jobs-table th,
        .jobs-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        .jobs-table th {
            background-color: var(--background-color);
            font-weight: 600;
            color: var(--text-primary);
        }

        .jobs-table tr:hover {
            background-color: var(--background-color);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-badge.active {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .status-badge.pending {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .status-badge.filled {
            background-color: rgba(100, 116, 139, 0.1);
            color: var(--secondary-color);
        }

        .job-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .action-btn.edit {
            background-color: var(--primary-color);
            color: white;
        }

        .action-btn.delete {
            background-color: var(--error-color);
            color: white;
        }

        .action-btn.view {
            background-color: var(--accent-color);
            color: white;
        }

        .sort-indicator {
            font-size: 0.8rem;
            opacity: 0.5;
            margin-left: 0.25rem;
            user-select: none;
            transition: opacity 0.2s;
        }

        .sort-indicator.active {
            opacity: 1;
            color: var(--primary-color);
        }

        th[onclick] {
            user-select: none;
        }

        th[onclick]:hover {
            background-color: var(--background-color);
        }

        th[onclick]:hover .sort-indicator {
            opacity: 0.8;
        }

        .status-dropdown {
            padding: 0.4rem 0.6rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.85rem;
            background: white;
            cursor: pointer;
            min-width: 90px;
            transition: all 0.2s ease;
            position: relative;
            z-index: 10;
        }

        .status-dropdown:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.1);
        }

        .status-dropdown:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .filter-btn {
            background-color: var(--background-color);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination-controls {
            font-size: 0.9rem;
        }

        .pagination-buttons button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-number {
            padding: 0.25rem 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            cursor: pointer;
            background: white;
            color: var(--text-primary);
            text-decoration: none;
            min-width: 32px;
            text-align: center;
        }

        .page-number.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .page-number:hover:not(.active) {
            background: var(--background-color);
        }

        /* Messaging Center */
        .message-item {
            transition: all 0.2s ease-in-out;
        }

        .message-item:hover {
            background-color: var(--background-color) !important;
        }

        .message-item.active {
            background-color: var(--background-color) !important;
            border-left: 4px solid var(--primary-color);
        }

        .message-item:not(.active) > div {
            background: var(--surface-color) !important;
        }

        .compose-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.2s ease;
        }

        .compose-modal-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(1);
            transition: transform 0.2s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .compose-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .compose-form input,
        .compose-form textarea {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-family: inherit;
        }

        .compose-form textarea {
            min-height: 200px;
            resize: vertical;
        }

        /* Applicants Section */
        .applicant-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            transition: all 0.2s ease-in-out;
        }

        .applicant-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .applicant-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .applicant-info {
            flex: 1;
        }

        .applicant-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .applicant-specialty {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .applicant-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.25rem;
        }

        .rating-stars {
            color: var(--warning-color);
        }

        .applicant-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Analytics Chart Placeholder */
        .chart-container {
            height: 300px;
            background-color: var(--background-color);
            border-radius: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        #performance-chart {
            display: block;
            background: white;
            border-radius: 0.75rem;
        }

        /* Footer */
        .footer {
            background-color: var(--text-primary);
            color: var(--text-muted);
            padding: 3rem 0 1rem;
            margin-top: auto;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4, .footer-section h5 {
            color: white;
            margin-bottom: 1rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid var(--secondary-color);
            padding-top: 1rem;
            text-align: center;
        }

        /* Enhanced Mobile Responsiveness */
        @media (max-width: 1024px) {
            /* Analytics date selectors stack better on tablets */
            .section-actions > div {
                flex-direction: column;
                gap: 1rem;
            }
            
            .section-actions > div > div:last-child {
                padding-left: 0;
                border-left: none;
                border-top: 1px solid var(--border-color);
                padding-top: 1rem;
            }
        }

        @media (max-width: 768px) {
            /* Navigation improvements */
            .nav-container {
                padding: 0 0.5rem;
            }
            
            .nav-menu {
                gap: 1rem;
                font-size: 0.9rem;
            }

            /* Dashboard layout adjustments */
            .container {
                padding: 0 0.5rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .section-header {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            /* Analytics section mobile improvements */
            .section-actions > div {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            .section-actions > div > div:first-child {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .section-actions > div > div:last-child {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
                padding: 1rem 0 0 0;
                border-left: none;
                border-top: 1px solid var(--border-color);
            }

            /* Table responsiveness */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .jobs-table {
                font-size: 0.85rem;
                min-width: 600px;
            }

            .jobs-table th,
            .jobs-table td {
                padding: 0.5rem 0.25rem;
                white-space: nowrap;
            }

            /* Applicant cards mobile layout */
            .applicant-card {
                flex-direction: column;
                text-align: center;
                padding: 1rem 0.5rem;
            }

            .applicant-info {
                margin: 0.5rem 0;
            }

            .applicant-actions {
                justify-content: center;
                flex-wrap: wrap;
            }

            /* Chart container mobile sizing */
            .chart-container {
                height: 250px;
                overflow-x: auto;
            }

            #performance-chart {
                min-width: 400px;
            }

            /* Pagination mobile improvements */
            .pagination-controls {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .pagination-info {
                order: 1;
            }

            .pagination-buttons {
                order: 2;
                justify-content: center;
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            /* Action buttons mobile layout */
            .action-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }

            .action-buttons .btn {
                width: 100%;
            }

            /* Stats grid mobile layout */
            .dashboard-section:last-child > div:last-child {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            /* Extra small screens */
            .nav-menu {
                flex-direction: column;
                gap: 0.5rem;
                width: 100%;
                margin-top: 1rem;
            }

            .nav-container {
                flex-direction: column;
                align-items: stretch;
            }

            /* Smaller buttons on mobile */
            .btn-small {
                font-size: 0.8rem;
                padding: 0.5rem 0.75rem;
            }

            /* Date inputs stack vertically */
            .section-actions > div > div:last-child {
                flex-direction: column;
                align-items: stretch;
            }

            .section-actions input[type="date"] {
                width: 100%;
                margin: 0.25rem 0;
            }

            /* Analytics stats single column on small screens */
            .dashboard-section:last-child > div:last-child {
                grid-template-columns: 1fr;
            }

            /* Table becomes fully scrollable */
            .jobs-table {
                font-size: 0.8rem;
                min-width: 500px;
            }

            /* Modal adjustments for small screens */
            .modal-content {
                margin: 1rem;
                max-height: 90vh;
                width: calc(100% - 2rem);
            }
        }

        /* Analytics Dashboard Styles */
        .analytics-tab {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            background: var(--surface-color);
            color: var(--text-secondary);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .analytics-tab:hover {
            background: var(--background-color);
            border-color: var(--primary-color);
        }

        .analytics-tab.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .analytics-metric {
            background: var(--surface-color);
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .metric-change {
            font-size: 0.8rem;
            font-weight: 500;
        }

        .metric-change.positive {
            color: var(--success-color);
        }

        .metric-change.negative {
            color: var(--error-color);
        }

        /* Quick Actions Styles */
        .quick-actions-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .quick-action-card {
            background: var(--background-color);
            border: 1px solid var(--border-light);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-action-card:hover {
            border-color: var(--primary-color);
            background: var(--surface-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
        }

        .action-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .action-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .action-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Accessibility & Focus States */
        /* Focus outlines for keyboard navigation */
        *:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Enhanced focus states for interactive elements */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus,
        a:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        /* Special focus state for dropdown menus */
        .dropdown-menu a:focus {
            background-color: var(--primary-color);
            color: white;
            outline: 2px solid var(--primary-hover);
            outline-offset: -2px;
        }

        /* Focus state for navigation links */
        .nav-link:focus {
            color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
            border-radius: 0.25rem;
        }

        /* Focus state for buttons */
        .btn-primary:focus,
        .btn-secondary:focus,
        .action-btn:focus,
        .pagination-button:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3), 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        /* Focus state for form inputs */
        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Focus state for table elements */
        .jobs-table th:focus,
        .jobs-table td:focus {
            background-color: rgba(37, 99, 235, 0.05);
            outline: 2px solid var(--primary-color);
            outline-offset: -2px;
        }

        /* Skip link for keyboard users */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1000;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* Improved color contrast for better accessibility */
        :root {
            --text-primary: #0f172a; /* Darker for better contrast */
            --text-secondary: #475569; /* Adjusted for better contrast */
            --text-muted: #64748b; /* Improved contrast */
            --success-color: #059669; /* Darker green for better contrast */
            --warning-color: #d97706; /* Darker orange for better contrast */
            --error-color: #dc2626; /* Darker red for better contrast */
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --primary-color: #1e40af;
                --text-primary: #000000;
                --text-secondary: #374151;
                --border-color: #4b5563;
                --success-color: #047857;
                --warning-color: #b45309;
                --error-color: #b91c1c;
            }

            .card, .dashboard-section {
                border: 2px solid var(--border-color);
            }

            button, .btn-primary, .btn-secondary {
                border: 2px solid currentColor;
            }
        }

        /* Reduced motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Ensure adequate spacing for touch targets */
        button, 
        .btn-primary, 
        .btn-secondary, 
        .action-btn, 
        .nav-link,
        .pagination-button {
            min-height: 44px;
            min-width: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1rem;
        }

        /* Mobile accessibility improvements */
        @media (max-width: 768px) {
            /* Larger touch targets on mobile */
            button, 
            .btn-primary, 
            .btn-secondary, 
            .action-btn,
            .mobile-menu-toggle {
                min-height: 48px;
                min-width: 48px;
            }

            /* Improved mobile focus visibility */
            *:focus {
                outline-width: 3px;
            }
        }

        /* Keyboard navigation improvements */
        .dropdown-menu a:focus + .dropdown-menu,
        .nav-dropdown:focus-within .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            pointer-events: auto;
        }

        /* Enhanced visual feedback for interactive elements */
        .clickable,
        button,
        .btn-primary,
        .btn-secondary,
        .action-btn,
        a,
        .nav-link {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .clickable:hover,
        button:hover:not(:disabled),
        .btn-primary:hover:not(:disabled),
        .btn-secondary:hover:not(:disabled),
        .action-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Mobile Menu Toggle Button */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 24px;
            height: 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .hamburger-line {
            width: 100%;
            height: 2px;
            background-color: var(--text-primary);
            border-radius: 1px;
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Mobile Navigation */
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: flex;
            }

            .nav-menu {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: var(--surface-color);
                border-top: 1px solid var(--border-color);
                flex-direction: column;
                align-items: flex-start;
                padding: 1rem 0;
                max-height: 0;
                overflow: hidden;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 999;
            }

            .nav-menu.active {
                max-height: 500px;
                opacity: 1;
                visibility: visible;
            }

            .nav-menu li {
                width: 100%;
            }

            .nav-menu .nav-link {
                display: block;
                padding: 1rem 1.5rem;
                width: 100%;
                text-align: left;
                border-bottom: 1px solid var(--border-light);
            }

            .nav-menu .nav-link:hover {
                background-color: var(--background-color);
            }

            /* Mobile dropdown behavior */
            .nav-dropdown .dropdown-menu {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                box-shadow: none;
                border: none;
                border-radius: 0;
                background: var(--background-color);
                margin: 0;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }

            .nav-dropdown.active .dropdown-menu {
                max-height: 200px;
            }

            .nav-dropdown .dropdown-menu a {
                padding: 0.75rem 2rem;
                font-size: 0.9rem;
            }

            .profile-dropdown .profile-menu {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                box-shadow: none;
                border: none;
                border-radius: 0;
                background: var(--background-color);
                margin: 0;
                min-width: auto;
                width: 100%;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }

            .profile-dropdown.active .profile-menu {
                max-height: 400px;
            }

            .profile-dropdown .profile-info {
                padding: 1rem 2rem;
            }

            .profile-dropdown .profile-menu li a {
                padding: 0.75rem 2rem;
            }
        }

        /* Loading States & Skeleton Loaders */
        /* Loading spinner base styles */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        .loading-spinner.large {
            width: 40px;
            height: 40px;
            border-width: 3px;
        }

        .loading-spinner.small {
            width: 16px;
            height: 16px;
            border-width: 2px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Loading overlay for full sections */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            border-radius: inherit;
        }

        .loading-overlay .loading-text {
            margin-top: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Skeleton loaders */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Skeleton for text content */
        .skeleton-text {
            height: 1em;
            margin-bottom: 0.5rem;
        }

        .skeleton-text.short {
            width: 60%;
        }

        .skeleton-text.medium {
            width: 80%;
        }

        .skeleton-text.long {
            width: 100%;
        }

        /* Skeleton for cards */
        .skeleton-card {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .skeleton-card .skeleton-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .skeleton-card .skeleton-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
        }

        .skeleton-card .skeleton-content {
            flex: 1;
        }

        /* Skeleton for table rows */
        .skeleton-table-row {
            display: table-row;
        }

        .skeleton-table-row .skeleton-cell {
            display: table-cell;
            padding: 1rem 0.5rem;
            vertical-align: middle;
        }

        .skeleton-table-row .skeleton-cell .skeleton {
            height: 1.2em;
            width: 100%;
        }

        /* Skeleton for stats */
        .skeleton-stat {
            text-align: center;
            padding: 1.5rem;
        }

        .skeleton-stat .skeleton-value {
            height: 2.5rem;
            width: 80%;
            margin: 0 auto 0.5rem;
        }

        .skeleton-stat .skeleton-label {
            height: 1rem;
            width: 60%;
            margin: 0 auto;
        }

        /* Loading button states */
        .btn-loading {
            position: relative;
            color: transparent;
            pointer-events: none;
        }

        .btn-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Component-specific loading states */
        .chart-loading {
            height: 300px;
            position: relative;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .chart-loading .skeleton-chart {
            width: 80%;
            height: 200px;
            background: linear-gradient(
                45deg,
                transparent 30%,
                var(--border-light) 30%,
                var(--border-light) 70%,
                transparent 70%
            );
            background-size: 20px 20px;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .chart-loading .skeleton-chart::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.8),
                transparent
            );
            animation: skeleton-loading 2s infinite;
        }

        /* Pulsing effect for critical loading states */
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Hide content during loading */
        .loading-content {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .loading-content.loaded {
            opacity: 1;
        }

        /* Applicant Status Controls */
        .applicant-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            gap: 1rem;
        }

        .applicant-status-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .status-indicator {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            white-space: nowrap;
        }

        .status-indicator.new {
            background: rgba(59, 130, 246, 0.1);
            color: #1e40af;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .status-indicator.reviewing {
            background: rgba(251, 146, 60, 0.1);
            color: #ea580c;
            border: 1px solid rgba(251, 146, 60, 0.2);
        }

        .status-indicator.interviewing {
            background: rgba(168, 85, 247, 0.1);
            color: #7c3aed;
            border: 1px solid rgba(168, 85, 247, 0.2);
        }

        .status-indicator.shortlisted {
            background: rgba(34, 197, 94, 0.1);
            color: #059669;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .status-indicator.offered {
            background: rgba(14, 165, 233, 0.1);
            color: #0284c7;
            border: 1px solid rgba(14, 165, 233, 0.2);
        }

        .status-indicator.hired {
            background: rgba(34, 197, 94, 0.15);
            color: #047857;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status-indicator.rejected {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .status-indicator.withdrawn {
            background: rgba(107, 114, 128, 0.1);
            color: #374151;
            border: 1px solid rgba(107, 114, 128, 0.2);
        }

        .status-dropdown {
            padding: 0.25rem 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.75rem;
            background: var(--surface-color);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 100px;
        }

        .status-dropdown:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
        }

        .status-dropdown:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Status change animations */
        .status-indicator {
            transition: all 0.3s ease;
        }

        .status-updating {
            opacity: 0.6;
            transform: scale(0.95);
        }

        /* Applicant card improvements */
        .applicant-card {
            position: relative;
            transition: all 0.3s ease;
        }

        .applicant-card.status-changed {
            animation: statusUpdate 0.5s ease;
            border-left: 4px solid var(--primary-color);
        }

        @keyframes statusUpdate {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15); }
            100% { transform: scale(1); }
        }

        /* Mobile status controls */
        @media (max-width: 768px) {
            .applicant-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .applicant-status-badge {
                align-self: flex-end;
                gap: 0.25rem;
            }

            .status-indicator {
                font-size: 0.7rem;
                padding: 0.2rem 0.6rem;
            }

            .status-dropdown {
                font-size: 0.7rem;
                padding: 0.2rem 0.4rem;
                min-width: 90px;
            }
        }

        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            /* Loading states */
            .loading-overlay {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255, 255, 255, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            }

            .loading-spinner {
                width: 40px;
                height: 40px;
                border: 3px solid var(--border-color);
                border-top: 3px solid var(--primary-color);
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* Analytics responsiveness */
            .analytics-tab {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .metric-value {
                font-size: 1.5rem;
            }

            /* Quick Actions mobile optimization */
            .quick-actions-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 0.75rem;
            }

            .quick-action-card {
                padding: 1rem;
            }

            .action-icon {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
            }

            .action-title {
                font-size: 0.9rem;
            }

            .action-description {
                font-size: 0.75rem;
            }

            /* Modal responsiveness */
            .compose-modal-content {
                margin: 1rem;
                max-width: calc(100vw - 2rem);
                max-height: calc(100vh - 2rem);
                padding: 1.5rem;
            }

            /* Table responsiveness */
            .jobs-table {
                font-size: 0.85rem;
            }

            .jobs-table th,
            .jobs-table td {
                padding: 0.5rem 0.25rem;
                min-width: 80px;
            }

            /* Action buttons in tables */
            .job-actions {
                display: flex;
                flex-direction: column;
                gap: 0.25rem;
            }

            .action-btn {
                font-size: 0.75rem;
                padding: 0.25rem 0.5rem;
            }

            /* Stats grid mobile */
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 0.75rem;
            }

            .stat-card {
                padding: 1rem;
            }

            .stat-value {
                font-size: 1.75rem;
            }

            .stat-label {
                font-size: 0.8rem;
            }

            /* Header adjustments */
            .dashboard-header {
                padding: 1rem 0;
            }

            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .header-actions {
                gap: 0.5rem;
            }

            /* Pagination mobile */
            .pagination-controls {
                flex-wrap: wrap;
                gap: 0.25rem;
            }

            .pagination-button {
                padding: 0.25rem 0.5rem;
                font-size: 0.8rem;
                min-width: 32px;
            }

            /* Form inputs mobile */
            input, select, textarea {
                font-size: 16px; /* Prevents zoom on iOS */
            }

            /* Message center mobile */
            .messaging-dashboard {
                flex-direction: column;
            }

            .message-sidebar {
                min-height: 200px;
            }

            .message-content {
                min-height: 300px;
            }

            /* Notification positioning */
            .notification {
                left: 1rem;
                right: 1rem;
                width: auto;
                max-width: none;
            }
        }

        /* Small mobile devices */
        @media (max-width: 480px) {
            /* Further mobile optimizations */
            .quick-actions-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header-actions {
                flex-direction: column;
                width: 100%;
            }

            .btn-primary,
            .btn-secondary {
                width: 100%;
                justify-content: center;
            }

            /* Very small tables */
            .jobs-table {
                font-size: 0.75rem;
            }

            .jobs-table th:nth-child(n+6),
            .jobs-table td:nth-child(n+6) {
                display: none; /* Hide less important columns on very small screens */
            }

            /* Analytics tabs stack */
            .analytics-tab {
                font-size: 0.7rem;
                padding: 0.3rem 0.6rem;
            }

            /* Profile dropdown mobile */
            .profile-menu {
                right: 0.5rem;
                left: 0.5rem;
                min-width: auto;
                width: auto;
            }
        }

        /* Landscape phone optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .dashboard-header {
                padding: 0.75rem 0;
            }

            .header-content {
                flex-direction: row;
                justify-content: space-between;
            }

            .quick-actions-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Skip link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="page-container">
        <!-- Navigation -->
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="nav-container">
                <div class="nav-brand">
                    <h2>LocumTrueRate</h2>
                </div>
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-menu">
                    <span class="hamburger-line" aria-hidden="true"></span>
                    <span class="hamburger-line" aria-hidden="true"></span>
                    <span class="hamburger-line" aria-hidden="true"></span>
                    <span class="sr-only">Menu</span>
                </button>
                <ul class="nav-menu" id="nav-menu" role="menubar" aria-label="Main menu">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li><a href="job-board.html" class="nav-link">Job Board</a></li>
                    <li><a href="paycheck-calculator.html" class="nav-link">Paycheck Calculator</a></li>
                    <li><a href="contract-calculator.html" class="nav-link">Contract Calculator</a></li>
                    <li class="nav-dropdown">
                        <a href="#" class="nav-link active">Dashboards</a>
                        <ul class="dropdown-menu">
                            <li><a href="recruiter-dashboard.html" class="active">Recruiter</a></li>
                            <li><a href="locum-dashboard.html">Locum</a></li>
                            <li><a href="admin-dashboard.html">Admin</a></li>
                        </ul>
                    </li>
                    <li class="nav-dropdown profile-dropdown">
                        <a href="#" class="nav-link profile-link" onclick="toggleProfileDropdown(event)">
                            <div class="profile-avatar">SJ</div>
                            <span>Sarah Johnson</span>
                            <span class="dropdown-arrow"></span>
                        </a>
                        <ul class="dropdown-menu profile-menu" id="profile-dropdown-menu">
                            <li class="profile-info">
                                <div class="profile-info-content">
                                    <div class="profile-name">Sarah Johnson</div>
                                    <div class="profile-role">Senior Healthcare Recruiter</div>
                                    <div class="profile-company">Metropolitan Staffing Solutions</div>
                                </div>
                            </li>
                            <li class="menu-divider"></li>
                            <li><a href="#" onclick="showProfileSettings()"> Profile Settings</a></li>
                            <li><a href="#" onclick="showAccountSettings()"> Account Settings</a></li>
                            <li><a href="#" onclick="showNotificationSettings()"> Notifications</a></li>
                            <li><a href="#" onclick="showHelpCenter()"> Help Center</a></li>
                            <li class="menu-divider"></li>
                            <li><a href="#" onclick="logout()" class="logout-link"> Sign Out</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Dashboard Header -->
        <section class="dashboard-header">
            <div class="container">
                <div class="header-content">
                    <div class="header-info">
                        <h1>Welcome back, Sarah Johnson</h1>
                        <p>Metropolitan Staffing Solutions  Senior Healthcare Recruiter</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn-primary" onclick="showNewJobForm()">Post New Job</button>
                        <button class="btn-secondary" onclick="viewAnalytics()">View Reports</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content" id="main-content" role="main" aria-label="Dashboard content">
            <div class="container">
                <!-- Date Range Controls for Metrics -->
                <div class="metrics-controls" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding: 1rem; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: 0.5rem;">
                    <h3 style="color: var(--text-primary); margin: 0; font-size: 1.1rem;"> Performance Metrics</h3>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <label style="font-weight: 500; color: var(--text-secondary);">Time Period:</label>
                        <select id="metrics-period" onchange="updateMetricsPeriod()" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 0.375rem; font-size: 0.9rem;">
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="quarter">This Quarter</option>
                            <option value="year">This Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <div id="custom-date-range" style="display: none; gap: 0.5rem; align-items: center;">
                            <input type="date" id="metrics-start-date" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.375rem; font-size: 0.9rem;">
                            <span style="color: var(--text-secondary);">to</span>
                            <input type="date" id="metrics-end-date" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.375rem; font-size: 0.9rem;">
                        </div>
                        <button onclick="refreshMetrics()" style="
                            padding: 0.5rem 1rem;
                            background: var(--primary-color);
                            color: white;
                            border: none;
                            border-radius: 0.375rem;
                            font-size: 0.9rem;
                            cursor: pointer;
                            transition: background-color 0.2s;
                        " onmouseover="this.style.backgroundColor='var(--primary-hover)'" onmouseout="this.style.backgroundColor='var(--primary-color)'">
                             Refresh
                        </button>
                    </div>
                </div>

                <!-- Stats Overview -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-value">24</div>
                        <div class="stat-label">Active Job Listings</div>
                        <div class="stat-change positive"> +3 this week</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-value">156</div>
                        <div class="stat-label">Total Applicants</div>
                        <div class="stat-change positive"> +18 this week</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-value">8</div>
                        <div class="stat-label">Positions Filled</div>
                        <div class="stat-change positive"> +2 this month</div>
                    </div>
                    <div class="stat-card accent">
                        <div class="stat-value">92%</div>
                        <div class="stat-label">Client Satisfaction</div>
                        <div class="stat-change positive"> +5% this quarter</div>
                    </div>
                </div>

                <!-- Quick Actions Section -->
                <div class="quick-actions-section">
                    <div class="section-header">
                        <h2 class="section-title"> Quick Actions</h2>
                        <button class="btn-small secondary" onclick="toggleQuickActions()" id="toggle-quick-actions">Hide</button>
                    </div>
                    <div class="quick-actions-grid" id="quick-actions-grid">
                        <div class="quick-action-card" onclick="showNewJobForm()">
                            <div class="action-icon"></div>
                            <div class="action-title">Post New Job</div>
                            <div class="action-description">Create a new job posting</div>
                        </div>
                        <div class="quick-action-card" onclick="scrollToSection('applicants-section')">
                            <div class="action-icon"></div>
                            <div class="action-title">View All Applicants</div>
                            <div class="action-description">Manage candidate applications</div>
                        </div>
                        <div class="quick-action-card" onclick="showComposeMessage()">
                            <div class="action-icon"></div>
                            <div class="action-title">Send Message</div>
                            <div class="action-description">Contact clients or candidates</div>
                        </div>
                        <div class="quick-action-card" onclick="scrollToSection('analytics-section')">
                            <div class="action-icon"></div>
                            <div class="action-title">View Analytics</div>
                            <div class="action-description">Performance reports & insights</div>
                        </div>
                        <div class="quick-action-card" onclick="exportAllData()">
                            <div class="action-icon"></div>
                            <div class="action-title">Export Data</div>
                            <div class="action-description">Download reports & data</div>
                        </div>
                        <div class="quick-action-card" onclick="scheduleInterviewBatch()">
                            <div class="action-icon"></div>
                            <div class="action-title">Schedule Interviews</div>
                            <div class="action-description">Batch interview scheduling</div>
                        </div>
                        <div class="quick-action-card" onclick="showMarketRates()">
                            <div class="action-icon"></div>
                            <div class="action-title">Market Rates</div>
                            <div class="action-description">Check competitive rates</div>
                        </div>
                        <div class="quick-action-card" onclick="showClientPortal()">
                            <div class="action-icon"></div>
                            <div class="action-title">Client Portal</div>
                            <div class="action-description">Manage client relationships</div>
                        </div>
                    </div>
                </div>

                <!-- Job Listings Management -->
                <div class="dashboard-section" id="jobs-section">
                    <div class="section-header">
                        <h2 class="section-title">Your Job Listings</h2>
                        <div class="section-actions">
                            <button class="btn-small filter-btn active" data-filter="all" onclick="filterJobs('all')">All</button>
                            <button class="btn-small filter-btn" data-filter="active" onclick="filterJobs('active')">Active</button>
                            <button class="btn-small filter-btn" data-filter="pending" onclick="filterJobs('pending')">Pending</button>
                            <button class="btn-small filter-btn" data-filter="filled" onclick="filterJobs('filled')">Filled</button>
                            <button class="btn-small primary" onclick="showNewJobForm()">+ New Job</button>
                        </div>
                    </div>

                    <table class="jobs-table">
                        <thead>
                            <tr>
                                <th onclick="sortTable(0)" style="cursor: pointer;">Position <span class="sort-indicator"></span></th>
                                <th onclick="sortTable(1)" style="cursor: pointer;">Facility <span class="sort-indicator"></span></th>
                                <th onclick="sortTable(2)" style="cursor: pointer;">Location <span class="sort-indicator"></span></th>
                                <th onclick="sortTable(3)" style="cursor: pointer;">Rate <span class="sort-indicator"></span></th>
                                <th onclick="sortTable(4)" style="cursor: pointer;">Applicants <span class="sort-indicator"></span></th>
                                <th onclick="sortTable(5)" style="cursor: pointer;">Posted <span class="sort-indicator"></span></th>
                                <th onclick="sortTable(6)" style="cursor: pointer;">Status <span class="sort-indicator"></span></th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="jobs-table-body">
                            <tr data-status="active" data-job-id="1">
                                <td>Emergency Medicine Physician</td>
                                <td>Metropolitan General</td>
                                <td>Los Angeles, CA</td>
                                <td data-sort-value="350">$350/hr</td>
                                <td data-sort-value="12">12</td>
                                <td data-sort-value="2025-01-10">Jan 10, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(1, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(1)">View</button>
                                        <button class="action-btn edit" onclick="editJob(1)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(1)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="2">
                                <td>Internal Medicine Hospitalist</td>
                                <td>City Medical Center</td>
                                <td>Houston, TX</td>
                                <td data-sort-value="285">$285/hr</td>
                                <td data-sort-value="8">8</td>
                                <td data-sort-value="2025-01-08">Jan 8, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(2, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(2)">View</button>
                                        <button class="action-btn edit" onclick="editJob(2)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(2)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="pending" data-job-id="3">
                                <td>Anesthesiologist</td>
                                <td>Sunshine Surgery Center</td>
                                <td>Miami, FL</td>
                                <td data-sort-value="425">$425/hr</td>
                                <td data-sort-value="15">15</td>
                                <td data-sort-value="2025-01-12">Jan 12, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(3, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending" selected>Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(3)">View</button>
                                        <button class="action-btn edit" onclick="editJob(3)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(3)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="filled" data-job-id="4">
                                <td>General Surgeon</td>
                                <td>Prairie Regional Medical</td>
                                <td>Chicago, IL</td>
                                <td data-sort-value="380">$380/hr</td>
                                <td data-sort-value="6">6</td>
                                <td data-sort-value="2025-01-05">Jan 5, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(4, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled" selected>Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(4)">View</button>
                                        <button class="action-btn edit" onclick="editJob(4)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(4)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <!-- Additional jobs to match KPI count -->
                            <tr data-status="active" data-job-id="5">
                                <td>Cardiothoracic Surgeon</td>
                                <td>Heart Institute</td>
                                <td>Miami, FL</td>
                                <td data-sort-value="450">$450/hr</td>
                                <td data-sort-value="4">4</td>
                                <td data-sort-value="2025-01-12">Jan 12, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(5, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(5)">View</button>
                                        <button class="action-btn edit" onclick="editJob(5)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(5)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="6">
                                <td>Pediatric Emergency Medicine</td>
                                <td>Children's Medical Center</td>
                                <td>Dallas, TX</td>
                                <td data-sort-value="320">$320/hr</td>
                                <td data-sort-value="9">9</td>
                                <td data-sort-value="2025-01-11">Jan 11, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(6, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(6)">View</button>
                                        <button class="action-btn edit" onclick="editJob(6)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(6)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="pending" data-job-id="7">
                                <td>Orthopedic Surgeon</td>
                                <td>Sports Medicine Institute</td>
                                <td>Denver, CO</td>
                                <td data-sort-value="395">$395/hr</td>
                                <td data-sort-value="7">7</td>
                                <td data-sort-value="2025-01-09">Jan 9, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(7, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending" selected>Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(7)">View</button>
                                        <button class="action-btn edit" onclick="editJob(7)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(7)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="8">
                                <td>Radiologist</td>
                                <td>Imaging Center West</td>
                                <td>Phoenix, AZ</td>
                                <td data-sort-value="310">$310/hr</td>
                                <td data-sort-value="5">5</td>
                                <td data-sort-value="2025-01-13">Jan 13, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(8, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(8)">View</button>
                                        <button class="action-btn edit" onclick="editJob(8)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(8)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="9">
                                <td>Neurologist</td>
                                <td>Brain and Spine Center</td>
                                <td>Boston, MA</td>
                                <td data-sort-value="365">$365/hr</td>
                                <td data-sort-value="11">11</td>
                                <td data-sort-value="2025-01-07">Jan 7, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(9, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(9)">View</button>
                                        <button class="action-btn edit" onclick="editJob(9)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(9)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="10">
                                <td>Psychiatrist</td>
                                <td>Mental Health Associates</td>
                                <td>Seattle, WA</td>
                                <td data-sort-value="275">$275/hr</td>
                                <td data-sort-value="6">6</td>
                                <td data-sort-value="2025-01-06">Jan 6, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(10, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(10)">View</button>
                                        <button class="action-btn edit" onclick="editJob(10)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(10)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="11">
                                <td>Dermatologist</td>
                                <td>Skin Care Clinic</td>
                                <td>San Diego, CA</td>
                                <td data-sort-value="290">$290/hr</td>
                                <td data-sort-value="8">8</td>
                                <td data-sort-value="2025-01-04">Jan 4, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(11, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(11)">View</button>
                                        <button class="action-btn edit" onclick="editJob(11)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(11)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="pending" data-job-id="12">
                                <td>Gastroenterologist</td>
                                <td>Digestive Health Center</td>
                                <td>Atlanta, GA</td>
                                <td data-sort-value="340">$340/hr</td>
                                <td data-sort-value="3">3</td>
                                <td data-sort-value="2025-01-03">Jan 3, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(12, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending" selected>Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(12)">View</button>
                                        <button class="action-btn edit" onclick="editJob(12)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(12)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="13">
                                <td>Pulmonologist</td>
                                <td>Respiratory Care Institute</td>
                                <td>Portland, OR</td>
                                <td data-sort-value="315">$315/hr</td>
                                <td data-sort-value="4">4</td>
                                <td data-sort-value="2025-01-02">Jan 2, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(13, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(13)">View</button>
                                        <button class="action-btn edit" onclick="editJob(13)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(13)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="14">
                                <td>Rheumatologist</td>
                                <td>Arthritis Treatment Center</td>
                                <td>Nashville, TN</td>
                                <td data-sort-value="305">$305/hr</td>
                                <td data-sort-value="2">2</td>
                                <td data-sort-value="2025-01-01">Jan 1, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(14, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(14)">View</button>
                                        <button class="action-btn edit" onclick="editJob(14)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(14)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="15">
                                <td>Oncologist</td>
                                <td>Cancer Treatment Center</td>
                                <td>Charlotte, NC</td>
                                <td data-sort-value="385">$385/hr</td>
                                <td data-sort-value="9">9</td>
                                <td data-sort-value="2025-01-10">Jan 10, 2025</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(15, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(15)">View</button>
                                        <button class="action-btn edit" onclick="editJob(15)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(15)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="filled" data-job-id="16">
                                <td>Endocrinologist</td>
                                <td>Diabetes Center</td>
                                <td>Tampa, FL</td>
                                <td data-sort-value="295">$295/hr</td>
                                <td data-sort-value="7">7</td>
                                <td data-sort-value="2024-12-28">Dec 28, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(16, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled" selected>Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(16)">View</button>
                                        <button class="action-btn edit" onclick="editJob(16)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(16)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="17">
                                <td>Nephrologist</td>
                                <td>Kidney Care Center</td>
                                <td>Salt Lake City, UT</td>
                                <td data-sort-value="325">$325/hr</td>
                                <td data-sort-value="5">5</td>
                                <td data-sort-value="2024-12-27">Dec 27, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(17, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(17)">View</button>
                                        <button class="action-btn edit" onclick="editJob(17)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(17)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="18">
                                <td>Hematologist</td>
                                <td>Blood Disorders Clinic</td>
                                <td>Richmond, VA</td>
                                <td data-sort-value="355">$355/hr</td>
                                <td data-sort-value="6">6</td>
                                <td data-sort-value="2024-12-26">Dec 26, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(18, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(18)">View</button>
                                        <button class="action-btn edit" onclick="editJob(18)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(18)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="pending" data-job-id="19">
                                <td>Infectious Disease Specialist</td>
                                <td>Tropical Medicine Center</td>
                                <td>New Orleans, LA</td>
                                <td data-sort-value="330">$330/hr</td>
                                <td data-sort-value="3">3</td>
                                <td data-sort-value="2024-12-25">Dec 25, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(19, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending" selected>Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(19)">View</button>
                                        <button class="action-btn edit" onclick="editJob(19)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(19)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="20">
                                <td>Pathologist</td>
                                <td>Laboratory Sciences</td>
                                <td>Minneapolis, MN</td>
                                <td data-sort-value="300">$300/hr</td>
                                <td data-sort-value="4">4</td>
                                <td data-sort-value="2024-12-24">Dec 24, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(20, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(20)">View</button>
                                        <button class="action-btn edit" onclick="editJob(20)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(20)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="21">
                                <td>Emergency Medicine Physician</td>
                                <td>Level 1 Trauma Center</td>
                                <td>Las Vegas, NV</td>
                                <td data-sort-value="370">$370/hr</td>
                                <td data-sort-value="10">10</td>
                                <td data-sort-value="2024-12-23">Dec 23, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(21, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(21)">View</button>
                                        <button class="action-btn edit" onclick="editJob(21)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(21)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="22">
                                <td>Family Medicine Physician</td>
                                <td>Community Health Center</td>
                                <td>Tucson, AZ</td>
                                <td data-sort-value="250">$250/hr</td>
                                <td data-sort-value="8">8</td>
                                <td data-sort-value="2024-12-22">Dec 22, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(22, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(22)">View</button>
                                        <button class="action-btn edit" onclick="editJob(22)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(22)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="filled" data-job-id="23">
                                <td>Anesthesiologist</td>
                                <td>Surgical Center East</td>
                                <td>Jacksonville, FL</td>
                                <td data-sort-value="335">$335/hr</td>
                                <td data-sort-value="12">12</td>
                                <td data-sort-value="2024-12-21">Dec 21, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(23, this.value)">
                                        <option value="active">Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled" selected>Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(23)">View</button>
                                        <button class="action-btn edit" onclick="editJob(23)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(23)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-status="active" data-job-id="24">
                                <td>Hospitalist</td>
                                <td>Regional Medical Center</td>
                                <td>Kansas City, MO</td>
                                <td data-sort-value="265">$265/hr</td>
                                <td data-sort-value="7">7</td>
                                <td data-sort-value="2024-12-20">Dec 20, 2024</td>
                                <td>
                                    <select class="status-dropdown" onchange="changeJobStatus(24, this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="filled">Filled</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="job-actions">
                                        <button class="action-btn view" onclick="viewJob(24)">View</button>
                                        <button class="action-btn edit" onclick="editJob(24)">Edit</button>
                                        <button class="action-btn delete" onclick="deleteJob(24)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <!-- Pagination Controls -->
                    <div class="pagination-controls" style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-light);">
                        <div class="pagination-info">
                            <span id="jobs-pagination-info">Showing 1-4 of 4 jobs</span>
                        </div>
                        <div class="pagination-buttons">
                            <button class="btn-small secondary" id="jobs-prev-btn" onclick="changeJobsPage(-1)" disabled> Previous</button>
                            <span id="jobs-page-numbers" style="margin: 0 1rem; display: flex; gap: 0.5rem;"></span>
                            <button class="btn-small secondary" id="jobs-next-btn" onclick="changeJobsPage(1)" disabled>Next </button>
                        </div>
                    </div>
                </div>

                <!-- Recent Applicants -->
                <div class="dashboard-section" id="applicants-section">
                    <div class="section-header">
                        <h2 class="section-title">Recent Applicants</h2>
                        <div class="section-actions">
                            <button class="btn-small secondary" onclick="viewAllApplicants()">View All</button>
                            <button class="btn-small primary" onclick="exportApplicants()">Export List</button>
                        </div>
                    </div>

                    <!-- Search and Filter Controls -->
                    <div class="applicant-controls" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; align-items: center;">
                        <div class="search-container" style="flex: 1; min-width: 200px;">
                            <div style="position: relative;">
                                <input 
                                    type="text" 
                                    id="applicant-search" 
                                    placeholder="Search by name, specialty, or position..." 
                                    onkeyup="filterApplicants()"
                                    style="
                                        width: 100%;
                                        padding: 0.75rem 1rem 0.75rem 2.5rem;
                                        border: 1px solid var(--border-color);
                                        border-radius: 0.5rem;
                                        font-size: 0.9rem;
                                        transition: border-color 0.2s;
                                    "
                                >
                                <span style="position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary); font-size: 1rem;"></span>
                            </div>
                        </div>
                        
                        <div class="filter-container" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <select 
                                id="specialty-filter" 
                                onchange="filterApplicants()"
                                style="
                                    padding: 0.75rem 1rem;
                                    border: 1px solid var(--border-color);
                                    border-radius: 0.5rem;
                                    font-size: 0.9rem;
                                    min-width: 140px;
                                "
                            >
                                <option value="">All Specialties</option>
                                <option value="emergency-medicine">Emergency Medicine</option>
                                <option value="internal-medicine">Internal Medicine</option>
                                <option value="anesthesiology">Anesthesiology</option>
                                <option value="surgery">Surgery</option>
                                <option value="cardiology">Cardiology</option>
                                <option value="neurology">Neurology</option>
                                <option value="radiology">Radiology</option>
                            </select>
                            
                            <select 
                                id="experience-filter" 
                                onchange="filterApplicants()"
                                style="
                                    padding: 0.75rem 1rem;
                                    border: 1px solid var(--border-color);
                                    border-radius: 0.5rem;
                                    font-size: 0.9rem;
                                    min-width: 120px;
                                "
                            >
                                <option value="">All Experience</option>
                                <option value="0-5">0-5 years</option>
                                <option value="5-10">5-10 years</option>
                                <option value="10-15">10-15 years</option>
                                <option value="15+">15+ years</option>
                            </select>
                            
                            <select 
                                id="rating-filter" 
                                onchange="filterApplicants()"
                                style="
                                    padding: 0.75rem 1rem;
                                    border: 1px solid var(--border-color);
                                    border-radius: 0.5rem;
                                    font-size: 0.9rem;
                                    min-width: 100px;
                                "
                            >
                                <option value="">All Ratings</option>
                                <option value="5">5 Stars</option>
                                <option value="4">4+ Stars</option>
                                <option value="3">3+ Stars</option>
                            </select>
                            
                            <button 
                                onclick="clearApplicantFilters()" 
                                style="
                                    padding: 0.75rem 1rem;
                                    background: var(--surface-color);
                                    border: 1px solid var(--border-color);
                                    border-radius: 0.5rem;
                                    color: var(--text-secondary);
                                    cursor: pointer;
                                    font-size: 0.9rem;
                                    transition: all 0.2s;
                                "
                                onmouseover="this.style.background='var(--background-color)'; this.style.color='var(--primary-color)'"
                                onmouseout="this.style.background='var(--surface-color)'; this.style.color='var(--text-secondary)'"
                            >
                                Clear
                            </button>
                        </div>
                    </div>

                    <!-- Filter Results Info -->
                    <div id="filter-results" style="margin-bottom: 1rem; color: var(--text-secondary); font-size: 0.9rem; display: none;">
                        <span id="filter-count">3 applicants found</span>
                    </div>

                    <!-- Applicants Grid -->
                    <div class="applicants-grid" id="applicants-grid">
                        <div class="applicant-card" data-specialty="emergency-medicine" data-experience="8" data-rating="4.9" data-name="Dr. Michael Rodriguez" data-position="EM Physician - LA" data-status="new">
                            <div class="applicant-avatar">DM</div>
                            <div class="applicant-info">
                                <div class="applicant-header">
                                    <div class="applicant-name">Dr. Michael Rodriguez</div>
                                    <div class="applicant-status-badge">
                                        <span class="status-indicator new">New</span>
                                        <select class="status-dropdown" onchange="updateApplicantStatus(1, this.value)" title="Update applicant status">
                                            <option value="new" selected>New</option>
                                            <option value="reviewing">Under Review</option>
                                            <option value="interviewing">Interviewing</option>
                                            <option value="shortlisted">Shortlisted</option>
                                            <option value="offered">Offered</option>
                                            <option value="hired">Hired</option>
                                            <option value="rejected">Rejected</option>
                                            <option value="withdrawn">Withdrawn</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="applicant-specialty">Emergency Medicine  8 years experience</div>
                                <div class="applicant-rating">
                                    <span class="rating-stars"></span>
                                    <span>4.9/5  Applied to EM Physician - LA</span>
                                </div>
                            </div>
                            <div class="applicant-actions">
                                <button class="action-btn view" onclick="viewApplicant(1)">Review</button>
                                <button class="action-btn edit" onclick="contactApplicant(1)">Contact</button>
                            </div>
                        </div>

                        <div class="applicant-card" data-specialty="internal-medicine" data-experience="12" data-rating="4.8" data-name="Dr. Sarah Kim" data-position="Hospitalist - Houston" data-status="interviewing">
                            <div class="applicant-avatar">SK</div>
                            <div class="applicant-info">
                                <div class="applicant-header">
                                    <div class="applicant-name">Dr. Sarah Kim</div>
                                    <div class="applicant-status-badge">
                                        <span class="status-indicator interviewing">Interviewing</span>
                                        <select class="status-dropdown" onchange="updateApplicantStatus(2, this.value)" title="Update applicant status">
                                            <option value="new">New</option>
                                            <option value="reviewing">Under Review</option>
                                            <option value="interviewing" selected>Interviewing</option>
                                            <option value="shortlisted">Shortlisted</option>
                                            <option value="offered">Offered</option>
                                            <option value="hired">Hired</option>
                                            <option value="rejected">Rejected</option>
                                            <option value="withdrawn">Withdrawn</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="applicant-specialty">Internal Medicine  12 years experience</div>
                                <div class="applicant-rating">
                                    <span class="rating-stars"></span>
                                    <span>4.8/5  Applied to Hospitalist - Houston</span>
                                </div>
                            </div>
                            <div class="applicant-actions">
                                <button class="action-btn view" onclick="viewApplicant(2)">Review</button>
                                <button class="action-btn edit" onclick="contactApplicant(2)">Contact</button>
                            </div>
                        </div>

                        <div class="applicant-card" data-specialty="anesthesiology" data-experience="15" data-rating="4.7" data-name="Dr. Amanda Patel" data-position="Anesthesiologist - Miami" data-status="shortlisted">
                            <div class="applicant-avatar">AP</div>
                            <div class="applicant-info">
                                <div class="applicant-header">
                                    <div class="applicant-name">Dr. Amanda Patel</div>
                                    <div class="applicant-status-badge">
                                        <span class="status-indicator shortlisted">Shortlisted</span>
                                        <select class="status-dropdown" onchange="updateApplicantStatus(3, this.value)" title="Update applicant status">
                                            <option value="new">New</option>
                                            <option value="reviewing">Under Review</option>
                                            <option value="interviewing">Interviewing</option>
                                            <option value="shortlisted" selected>Shortlisted</option>
                                            <option value="offered">Offered</option>
                                            <option value="hired">Hired</option>
                                            <option value="rejected">Rejected</option>
                                            <option value="withdrawn">Withdrawn</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="applicant-specialty">Anesthesiology  15 years experience</div>
                                <div class="applicant-rating">
                                    <span class="rating-stars"></span>
                                    <span>4.7/5  Applied to Anesthesiologist - Miami</span>
                                </div>
                            </div>
                            <div class="applicant-actions">
                                <button class="action-btn view" onclick="viewApplicant(3)">Review</button>
                                <button class="action-btn edit" onclick="contactApplicant(3)">Contact</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Applicants Pagination Controls -->
                    <div class="pagination-controls" style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-light);">
                        <div class="pagination-info">
                            <span id="applicants-pagination-info">Showing 1-3 of 3 applicants</span>
                        </div>
                        <div class="pagination-buttons">
                            <button class="btn-small secondary" id="applicants-prev-btn" onclick="changeApplicantsPage(-1)" disabled> Previous</button>
                            <span id="applicants-page-numbers" style="margin: 0 1rem; display: flex; gap: 0.5rem;"></span>
                            <button class="btn-small secondary" id="applicants-next-btn" onclick="changeApplicantsPage(1)" disabled>Next </button>
                        </div>
                    </div>
                </div>

                <!-- Messaging Center -->
                <div class="dashboard-section" id="messages-section">
                    <div class="section-header">
                        <h2 class="section-title">Message Center</h2>
                        <div class="section-actions">
                            <button class="btn primary" onclick="showComposeMessage()">+ Compose Message</button>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1rem; min-height: 400px;">
                        <!-- Message Sidebar -->
                        <div style="border: 1px solid var(--border-color); border-radius: 0.75rem; overflow: hidden;">
                            <div style="background: var(--background-color); padding: 1rem; border-bottom: 1px solid var(--border-color);">
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="btn-small filter-btn active" onclick="filterMessages('inbox')">Inbox (4)</button>
                                    <button class="btn-small filter-btn" onclick="filterMessages('sent')">Sent</button>
                                    <button class="btn-small filter-btn" onclick="filterMessages('drafts')">Drafts</button>
                                </div>
                            </div>
                            <div id="message-list" style="height: 320px; overflow-y: auto;">
                                <!-- Message List Items -->
                                <div class="message-item active" onclick="selectMessage(1)" data-message-id="1" data-type="inbox">
                                    <div style="padding: 1rem; border-bottom: 1px solid var(--border-light); cursor: pointer; background: var(--background-color);">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                            <div style="font-weight: 600; color: var(--text-primary);">Dr. Sarah Johnson</div>
                                            <div style="font-size: 0.8rem; color: var(--text-secondary);">2 hours ago</div>
                                        </div>
                                        <div style="font-size: 0.9rem; color: var(--text-primary); margin-bottom: 0.25rem;">Application Question - Houston Position</div>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.3;">I have a question regarding the call schedule for the emergency medicine position...</div>
                                    </div>
                                </div>
                                <div class="message-item" onclick="selectMessage(2)" data-message-id="2" data-type="inbox">
                                    <div style="padding: 1rem; border-bottom: 1px solid var(--border-light); cursor: pointer;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                            <div style="font-weight: 600; color: var(--text-primary);">Dr. Michael Chen</div>
                                            <div style="font-size: 0.8rem; color: var(--text-secondary);">1 day ago</div>
                                        </div>
                                        <div style="font-size: 0.9rem; color: var(--text-primary); margin-bottom: 0.25rem;">Contract Terms Clarification</div>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.3;">Could you please clarify the malpractice insurance coverage details...</div>
                                    </div>
                                </div>
                                <div class="message-item" onclick="selectMessage(3)" data-message-id="3" data-type="inbox">
                                    <div style="padding: 1rem; border-bottom: 1px solid var(--border-light); cursor: pointer;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                            <div style="font-weight: 600; color: var(--text-primary);">Dr. Emily Rodriguez</div>
                                            <div style="font-size: 0.8rem; color: var(--text-secondary);">2 days ago</div>
                                        </div>
                                        <div style="font-size: 0.9rem; color: var(--text-primary); margin-bottom: 0.25rem;">Availability Update</div>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.3;">My availability has changed for the Los Angeles assignment. I can start...</div>
                                    </div>
                                </div>
                                <div class="message-item" onclick="selectMessage(4)" data-message-id="4" data-type="inbox">
                                    <div style="padding: 1rem; border-bottom: 1px solid var(--border-light); cursor: pointer;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                            <div style="font-weight: 600; color: var(--text-primary);">Dr. James Wilson</div>
                                            <div style="font-size: 0.8rem; color: var(--text-secondary);">3 days ago</div>
                                        </div>
                                        <div style="font-size: 0.9rem; color: var(--text-primary); margin-bottom: 0.25rem;">Thank You - Placement Success</div>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.3;">Thank you for the excellent placement service. The position has been...</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Message Content Area -->
                        <div id="message-content" style="border: 1px solid var(--border-color); border-radius: 0.75rem; padding: 1.5rem; background: var(--surface-color);">
                            <div id="selected-message">
                                <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Application Question - Houston Position</h3>
                                    <div style="display: flex; align-items: center; gap: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                                        <span><strong>From:</strong> Dr. Sarah Johnson &lt;sarah.johnson@email.com&gt;</span>
                                        <span><strong>Date:</strong> January 13, 2025 at 2:15 PM</span>
                                    </div>
                                </div>
                                <div style="line-height: 1.6; color: var(--text-primary); margin-bottom: 1.5rem;">
                                    <p>Hello,</p>
                                    <p>I hope this message finds you well. I have a question regarding the call schedule for the emergency medicine position in Houston that was posted last week.</p>
                                    <p>Could you please provide more details about:</p>
                                    <ul>
                                        <li>The typical call frequency (how many nights per month)</li>
                                        <li>Whether there's backup coverage available</li>
                                        <li>The process for requesting time off during busy periods</li>
                                    </ul>
                                    <p>I'm very interested in this position and want to ensure it aligns with my availability and work-life balance preferences.</p>
                                    <p>Thank you for your time and I look forward to hearing from you.</p>
                                    <p>Best regards,<br>Dr. Sarah Johnson</p>
                                </div>
                                <div style="display: flex; gap: 1rem;">
                                    <button class="btn primary" onclick="replyToMessage(1)">Reply</button>
                                    <button class="btn secondary" onclick="forwardMessage(1)">Forward</button>
                                    <button class="btn secondary" onclick="archiveMessage(1)">Archive</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Analytics -->
                <div class="dashboard-section" id="analytics-section">
                    <div class="section-header">
                        <h2 class="section-title">Performance Analytics</h2>
                        <div class="section-actions">
                            <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="btn-small secondary" onclick="changeTimeframe('week')">This Week</button>
                                    <button class="btn-small secondary" onclick="changeTimeframe('month')">This Month</button>
                                    <button class="btn-small secondary" onclick="changeTimeframe('quarter')">This Quarter</button>
                                </div>
                                <div style="display: flex; gap: 0.5rem; align-items: center; padding-left: 1rem; border-left: 1px solid var(--border-color);">
                                    <label style="font-size: 0.9rem; color: var(--text-secondary);">Custom Range:</label>
                                    <input type="date" id="analytics-start-date" style="padding: 0.25rem; border: 1px solid var(--border-color); border-radius: 0.25rem; font-size: 0.85rem;">
                                    <span style="color: var(--text-secondary);">to</span>
                                    <input type="date" id="analytics-end-date" style="padding: 0.25rem; border: 1px solid var(--border-color); border-radius: 0.25rem; font-size: 0.85rem;">
                                    <button class="btn-small primary" onclick="applyCustomDateRange()" style="font-size: 0.85rem;">Apply</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="performance-chart" width="800" height="300"></canvas>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: var(--background-color); border-radius: 0.5rem;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color);">1,247</div>
                            <div style="color: var(--text-secondary);">Total Job Views</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--background-color); border-radius: 0.5rem;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--accent-color);">156</div>
                            <div style="color: var(--text-secondary);">Applications Received</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--background-color); border-radius: 0.5rem;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--warning-color);">12.5%</div>
                            <div style="color: var(--text-secondary);">Conversion Rate</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--background-color); border-radius: 0.5rem;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--success-color);">18 days</div>
                            <div style="color: var(--text-secondary);">Avg. Time to Fill</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-container">
                    <div class="footer-section">
                        <h4>LocumTrueRate</h4>
                        <p>Empowering healthcare professionals with accurate contract analysis and job matching.</p>
                    </div>
                    <div class="footer-section">
                        <h5>Tools</h5>
                        <ul>
                            <li><a href="paycheck-calculator.html">Paycheck Calculator</a></li>
                            <li><a href="contract-calculator.html">Contract Calculator</a></li>
                            <li><a href="job-board.html">Job Board</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h5>Support</h5>
                        <ul>
                            <li><a href="#">Help Center</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 LocumTrueRate. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Mobile menu toggle functionality
        function toggleMobileMenu() {
            const navMenu = document.getElementById('nav-menu');
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            const isExpanded = navMenu.classList.contains('active');
            
            navMenu.classList.toggle('active');
            mobileToggle.classList.toggle('active');
            
            // Update ARIA attributes for accessibility
            mobileToggle.setAttribute('aria-expanded', !isExpanded);
            navMenu.setAttribute('aria-hidden', isExpanded);
            
            // Update screen reader announcement
            const srText = mobileToggle.querySelector('.sr-only');
            srText.textContent = isExpanded ? 'Menu' : 'Close menu';
            
            // Close dropdowns when menu is closed
            if (isExpanded) {
                const dropdowns = document.querySelectorAll('.nav-dropdown.active');
                dropdowns.forEach(dropdown => dropdown.classList.remove('active'));
            }
        }

        // Handle dropdown clicks in mobile menu
        function toggleMobileDropdown(event) {
            event.preventDefault();
            event.stopPropagation();
            
            const dropdown = event.target.closest('.nav-dropdown');
            const isCurrentlyActive = dropdown.classList.contains('active');
            
            // Close all other dropdowns
            const allDropdowns = document.querySelectorAll('.nav-dropdown.active');
            allDropdowns.forEach(d => {
                if (d !== dropdown) {
                    d.classList.remove('active');
                }
            });
            
            // Toggle current dropdown
            dropdown.classList.toggle('active', !isCurrentlyActive);
        }

        // Add mobile dropdown event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const mobileDropdowns = document.querySelectorAll('.nav-dropdown > .nav-link');
            mobileDropdowns.forEach(link => {
                link.addEventListener('click', function(event) {
                    if (window.innerWidth <= 768) {
                        toggleMobileDropdown(event);
                    }
                });
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                const navMenu = document.getElementById('nav-menu');
                const mobileToggle = document.querySelector('.mobile-menu-toggle');
                
                if (navMenu.classList.contains('active') && 
                    !navMenu.contains(event.target) && 
                    !mobileToggle.contains(event.target)) {
                    toggleMobileMenu();
                }
            });

            // Handle window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    const navMenu = document.getElementById('nav-menu');
                    const mobileToggle = document.querySelector('.mobile-menu-toggle');
                    const dropdowns = document.querySelectorAll('.nav-dropdown.active');
                    
                    navMenu.classList.remove('active');
                    mobileToggle.classList.remove('active');
                    dropdowns.forEach(dropdown => dropdown.classList.remove('active'));
                }
            });
        });

        // Loading state management
        function showLoadingSpinner(element, size = 'default', text = '') {
            if (!element) return;
            
            element.style.position = 'relative';
            
            const overlay = document.createElement('div');
            overlay.className = 'loading-overlay';
            overlay.innerHTML = `
                <div class="loading-spinner ${size}"></div>
                ${text ? `<div class="loading-text">${text}</div>` : ''}
            `;
            
            element.appendChild(overlay);
            return overlay;
        }

        function hideLoadingSpinner(element) {
            if (!element) return;
            const overlay = element.querySelector('.loading-overlay');
            if (overlay) {
                overlay.remove();
            }
        }

        function showSkeletonLoader(element, type = 'card', count = 1) {
            if (!element) return;
            
            element.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                let skeletonHTML = '';
                
                switch (type) {
                    case 'card':
                        skeletonHTML = `
                            <div class="skeleton-card">
                                <div class="skeleton-header">
                                    <div class="skeleton skeleton-avatar"></div>
                                    <div class="skeleton-content">
                                        <div class="skeleton skeleton-text medium"></div>
                                        <div class="skeleton skeleton-text short"></div>
                                    </div>
                                </div>
                                <div class="skeleton skeleton-text long"></div>
                                <div class="skeleton skeleton-text medium"></div>
                                <div class="skeleton skeleton-text short"></div>
                            </div>
                        `;
                        break;
                    case 'table':
                        skeletonHTML = `
                            <tr class="skeleton-table-row">
                                <td class="skeleton-cell"><div class="skeleton"></div></td>
                                <td class="skeleton-cell"><div class="skeleton"></div></td>
                                <td class="skeleton-cell"><div class="skeleton"></div></td>
                                <td class="skeleton-cell"><div class="skeleton"></div></td>
                                <td class="skeleton-cell"><div class="skeleton"></div></td>
                                <td class="skeleton-cell"><div class="skeleton"></div></td>
                            </tr>
                        `;
                        break;
                    case 'stat':
                        skeletonHTML = `
                            <div class="skeleton-stat">
                                <div class="skeleton skeleton-value"></div>
                                <div class="skeleton skeleton-label"></div>
                            </div>
                        `;
                        break;
                    case 'text':
                        skeletonHTML = `
                            <div class="skeleton skeleton-text long"></div>
                            <div class="skeleton skeleton-text medium"></div>
                            <div class="skeleton skeleton-text short"></div>
                        `;
                        break;
                }
                
                element.insertAdjacentHTML('beforeend', skeletonHTML);
            }
        }

        function setButtonLoading(button, loading = true) {
            if (!button) return;
            
            if (loading) {
                button.classList.add('btn-loading');
                button.disabled = true;
                button.setAttribute('aria-busy', 'true');
            } else {
                button.classList.remove('btn-loading');
                button.disabled = false;
                button.setAttribute('aria-busy', 'false');
            }
        }

        function showChartLoading(element) {
            if (!element) return;
            
            element.innerHTML = `
                <div class="chart-loading">
                    <div class="skeleton-chart"></div>
                    <div class="loading-text">Loading chart data...</div>
                </div>
            `;
        }

        // Simulate loading for various dashboard components
        function simulateDataLoading() {
            // Simulate loading stats
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid) {
                showSkeletonLoader(statsGrid, 'stat', 4);
                
                setTimeout(() => {
                    location.reload(); // This would normally load real data
                }, 2000);
            }
        }

        function loadJobsWithSkeleton() {
            const jobsTableBody = document.querySelector('.jobs-table tbody');
            if (jobsTableBody) {
                showSkeletonLoader(jobsTableBody, 'table', 5);
                
                setTimeout(() => {
                    // This would normally load real job data
                    hideLoadingSpinner(jobsTableBody.closest('.dashboard-section'));
                }, 1500);
            }
        }

        function loadRecentApplicantsWithSkeleton() {
            const applicantsGrid = document.querySelector('.applicants-grid');
            if (applicantsGrid) {
                showSkeletonLoader(applicantsGrid, 'card', 3);
                
                setTimeout(() => {
                    // This would normally load real applicant data
                    location.reload();
                }, 1800);
            }
        }

        // Add loading states to existing functions
        function refreshKPIs() {
            const kpiSection = document.querySelector('.stats-grid');
            const button = event?.target;
            
            if (button) setButtonLoading(button, true);
            if (kpiSection) showLoadingSpinner(kpiSection, 'default', 'Refreshing KPIs...');
            
            setTimeout(() => {
                if (button) setButtonLoading(button, false);
                if (kpiSection) hideLoadingSpinner(kpiSection);
                
                // Simulate data update
                const statValues = document.querySelectorAll('.stat-value');
                statValues.forEach(stat => {
                    const currentValue = parseInt(stat.textContent);
                    const newValue = currentValue + Math.floor(Math.random() * 10) - 5;
                    stat.textContent = Math.max(0, newValue);
                });
                
                showToast('KPIs refreshed successfully!', 'success');
            }, 2000);
        }

        // Smooth scroll to section
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                // Calculate offset accounting for fixed navbar
                const navbar = document.querySelector('.navbar');
                const navbarHeight = navbar ? navbar.offsetHeight : 0;
                const sectionTop = section.offsetTop - navbarHeight - 20; // Extra 20px padding
                
                // Smooth scroll to section
                window.scrollTo({
                    top: sectionTop,
                    behavior: 'smooth'
                });
                
                // Brief highlight animation
                section.style.transition = 'background-color 0.3s ease';
                section.style.backgroundColor = 'rgba(37, 99, 235, 0.05)';
                setTimeout(() => {
                    section.style.backgroundColor = '';
                }, 1000);
            }
        }

        // Dashboard functionality
        function showNewJobForm() {
            // Prevent multiple modals from opening
            if (document.querySelector('.compose-modal')) {
                return;
            }
            
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Post New Job</h2>
                        <button onclick="closeJobModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <form class="compose-form" onsubmit="submitNewJob(event)">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Position Title *</label>
                                <input type="text" id="job-title" placeholder="e.g. Emergency Medicine Physician" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Specialty *</label>
                                <select id="job-specialty" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="">Select Specialty</option>
                                    <option value="emergency-medicine">Emergency Medicine</option>
                                    <option value="internal-medicine">Internal Medicine</option>
                                    <option value="anesthesiology">Anesthesiology</option>
                                    <option value="surgery">Surgery</option>
                                    <option value="cardiology">Cardiology</option>
                                    <option value="neurology">Neurology</option>
                                    <option value="radiology">Radiology</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Facility Name *</label>
                                <input type="text" id="job-facility" placeholder="e.g. Metropolitan General Hospital" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Facility Type</label>
                                <select id="job-facility-type" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="hospital">Hospital</option>
                                    <option value="clinic">Clinic</option>
                                    <option value="urgent-care">Urgent Care</option>
                                    <option value="surgery-center">Surgery Center</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">City *</label>
                                <input type="text" id="job-city" placeholder="e.g. Los Angeles" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">State *</label>
                                <select id="job-state" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="">Select State</option>
                                    <option value="CA">California</option>
                                    <option value="TX">Texas</option>
                                    <option value="FL">Florida</option>
                                    <option value="NY">New York</option>
                                    <option value="IL">Illinois</option>
                                    <option value="CO">Colorado</option>
                                    <option value="WA">Washington</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ZIP Code</label>
                                <input type="text" id="job-zip" placeholder="90210" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Hourly Rate *</label>
                                <input type="number" id="job-rate" placeholder="350" min="0" step="0.01" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Start Date *</label>
                                <input type="date" id="job-start-date" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Duration</label>
                                <select id="job-duration" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="1-week">1 Week</option>
                                    <option value="2-weeks">2 Weeks</option>
                                    <option value="1-month" selected>1 Month</option>
                                    <option value="3-months">3 Months</option>
                                    <option value="6-months">6 Months</option>
                                    <option value="ongoing">Ongoing</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Job Description</label>
                            <textarea id="job-description" placeholder="Describe the position, responsibilities, and requirements..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; min-height: 120px; resize: vertical;"></textarea>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Required Experience</label>
                                <select id="job-experience" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="entry">Entry Level (0-2 years)</option>
                                    <option value="mid">Mid Level (3-7 years)</option>
                                    <option value="senior" selected>Senior Level (8+ years)</option>
                                    <option value="expert">Expert Level (15+ years)</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Call Requirements</label>
                                <select id="job-call" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="none">No Call</option>
                                    <option value="light">Light Call (1-2 nights/month)</option>
                                    <option value="moderate" selected>Moderate Call (3-5 nights/month)</option>
                                    <option value="heavy">Heavy Call (6+ nights/month)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                            <button type="button" class="btn secondary" onclick="closeJobModal()">Cancel</button>
                            <button type="button" class="btn secondary" onclick="saveDraftJob()">Save as Draft</button>
                            <button type="submit" class="btn primary">Post Job</button>
                        </div>
                    </form>
                </div>
            `;
            
            // Add backdrop click handler
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeJobModal();
                }
            });
            
            // Add escape key handler
            const escapeHandler = function(e) {
                if (e.key === 'Escape') {
                    closeJobModal();
                }
            };
            document.addEventListener('keydown', escapeHandler);
            
            // Store escape handler for cleanup
            modal.escapeHandler = escapeHandler;
            
            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
            
            // Add initial animation
            modal.style.opacity = '0';
            const modalContent = modal.querySelector('.compose-modal-content');
            modalContent.style.transform = 'scale(0.9)';
            
            document.body.appendChild(modal);
            
            // Animate in
            setTimeout(() => {
                modal.style.opacity = '1';
                modalContent.style.transform = 'scale(1)';
            }, 10);
            
            // Focus first input for better UX
            setTimeout(() => {
                const firstInput = modal.querySelector('input[type="text"]');
                if (firstInput) {
                    firstInput.focus();
                }
            }, 200);
        }

        function closeJobModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                // Clean up escape key handler
                if (modal.escapeHandler) {
                    document.removeEventListener('keydown', modal.escapeHandler);
                }
                
                // Restore body scroll
                document.body.style.overflow = '';
                
                // Remove modal with fade animation
                modal.style.opacity = '0';
                const modalContent = modal.querySelector('.compose-modal-content');
                if (modalContent) {
                    modalContent.style.transform = 'scale(0.9)';
                }
                setTimeout(() => {
                    modal.remove();
                }, 200);
            }
        }

        function saveDraftJob() {
            showNotification('Job saved as draft', 'info');
            closeJobModal();
        }

        function submitNewJob(event) {
            event.preventDefault();
            
            const submitButton = event.target.querySelector('button[type="submit"]');
            setButtonLoading(submitButton, true);
            
            const jobData = {
                title: document.getElementById('job-title').value,
                specialty: document.getElementById('job-specialty').value,
                facility: document.getElementById('job-facility').value,
                facilityType: document.getElementById('job-facility-type').value,
                city: document.getElementById('job-city').value,
                state: document.getElementById('job-state').value,
                zip: document.getElementById('job-zip').value,
                rate: document.getElementById('job-rate').value,
                startDate: document.getElementById('job-start-date').value,
                duration: document.getElementById('job-duration').value,
                description: document.getElementById('job-description').value,
                experience: document.getElementById('job-experience').value,
                call: document.getElementById('job-call').value
            };
            
            // Simulate API call with loading state
            setTimeout(() => {
                // Add new job to table
                addJobToTable(jobData);
                
                setButtonLoading(submitButton, false);
                showToast('Job posted successfully!', 'success');
                closeJobModal();
            }, 1500);
        }

        function addJobToTable(jobData) {
            const tableBody = document.getElementById('jobs-table-body');
            const newJobId = Date.now(); // Use timestamp as ID
            
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-status', 'active');
            newRow.setAttribute('data-job-id', newJobId);
            
            newRow.innerHTML = `
                <td>${jobData.title}</td>
                <td>${jobData.facility}</td>
                <td>${jobData.city}, ${jobData.state}</td>
                <td data-sort-value="${jobData.rate}">$${jobData.rate}/hr</td>
                <td data-sort-value="0">0</td>
                <td data-sort-value="${jobData.startDate}">${formatDate(jobData.startDate)}</td>
                <td>
                    <select class="status-dropdown" onchange="changeJobStatus(${newJobId}, this.value)">
                        <option value="active" selected>Active</option>
                        <option value="pending">Pending</option>
                        <option value="filled">Filled</option>
                        <option value="expired">Expired</option>
                    </select>
                </td>
                <td>
                    <div class="job-actions">
                        <button class="action-btn view" onclick="viewJob(${newJobId})">View</button>
                        <button class="action-btn edit" onclick="editJob(${newJobId})">Edit</button>
                        <button class="action-btn delete" onclick="deleteJob(${newJobId})">Delete</button>
                    </div>
                </td>
            `;
            
            // Add to top of table
            tableBody.insertBefore(newRow, tableBody.firstChild);
            
            // Update pagination and stats
            updateJobsPagination();
            updateDashboardStats();
        }

        function viewAnalytics() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 1200px; max-height: 90vh;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> Advanced Analytics Dashboard</h2>
                        <button onclick="closeAnalyticsModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <!-- Analytics Navigation -->
                    <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                        <button class="analytics-tab active" data-tab="overview" onclick="switchAnalyticsTab('overview')">Overview</button>
                        <button class="analytics-tab" data-tab="performance" onclick="switchAnalyticsTab('performance')">Job Performance</button>
                        <button class="analytics-tab" data-tab="conversion" onclick="switchAnalyticsTab('conversion')">Conversion Rates</button>
                        <button class="analytics-tab" data-tab="market" onclick="switchAnalyticsTab('market')">Market Analysis</button>
                        <button class="analytics-tab" data-tab="revenue" onclick="switchAnalyticsTab('revenue')">Revenue Tracking</button>
                    </div>
                    
                    <!-- Date Range Selector -->
                    <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 2rem; padding: 1rem; background: var(--background-color); border-radius: 0.5rem;">
                        <label style="font-weight: 500;">Date Range:</label>
                        <select id="analytics-period" onchange="updateAnalyticsPeriod()" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                            <option value="7">Last 7 Days</option>
                            <option value="30" selected>Last 30 Days</option>
                            <option value="90">Last 90 Days</option>
                            <option value="365">Last Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <input type="date" id="analytics-from" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem; display: none;">
                        <input type="date" id="analytics-to" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem; display: none;">
                        <button class="btn-small primary" onclick="applyAnalyticsDateRange()" id="apply-date-btn" style="display: none;">Apply</button>
                        <button class="btn-small secondary" onclick="exportAnalytics()"> Export Report</button>
                    </div>
                    
                    <!-- Analytics Content -->
                    <div id="analytics-content" style="overflow-y: auto; max-height: 60vh;">
                        <!-- Overview Tab Content (Default) -->
                        <div id="overview-tab" class="analytics-tab-content">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                <div class="analytics-metric">
                                    <div class="metric-value">24</div>
                                    <div class="metric-label">Jobs Posted</div>
                                    <div class="metric-change positive"> +15% vs last month</div>
                                </div>
                                <div class="analytics-metric">
                                    <div class="metric-value">156</div>
                                    <div class="metric-label">Total Applicants</div>
                                    <div class="metric-change positive"> +28% vs last month</div>
                                </div>
                                <div class="analytics-metric">
                                    <div class="metric-value">8</div>
                                    <div class="metric-label">Positions Filled</div>
                                    <div class="metric-change positive"> +60% vs last month</div>
                                </div>
                                <div class="analytics-metric">
                                    <div class="metric-value">6.5</div>
                                    <div class="metric-label">Avg Days to Fill</div>
                                    <div class="metric-change negative"> -1.2 days vs last month</div>
                                </div>
                                <div class="analytics-metric">
                                    <div class="metric-value">$487k</div>
                                    <div class="metric-label">Revenue Generated</div>
                                    <div class="metric-change positive"> +32% vs last month</div>
                                </div>
                                <div class="analytics-metric">
                                    <div class="metric-value">92%</div>
                                    <div class="metric-label">Client Satisfaction</div>
                                    <div class="metric-change positive"> +5% vs last month</div>
                                </div>
                            </div>
                            
                            <!-- Charts Container -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                                <div style="background: var(--surface-color); padding: 1.5rem; border-radius: 0.5rem; border: 1px solid var(--border-color);">
                                    <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Applications by Specialty</h4>
                                    <canvas id="specialty-chart" width="300" height="200"></canvas>
                                </div>
                                <div style="background: var(--surface-color); padding: 1.5rem; border-radius: 0.5rem; border: 1px solid var(--border-color);">
                                    <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Monthly Performance Trend</h4>
                                    <canvas id="trend-chart" width="300" height="200"></canvas>
                                </div>
                            </div>
                            
                            <!-- Top Performing Jobs -->
                            <div style="background: var(--surface-color); padding: 1.5rem; border-radius: 0.5rem; border: 1px solid var(--border-color);">
                                <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Top Performing Job Postings</h4>
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="border-bottom: 2px solid var(--border-color);">
                                            <th style="text-align: left; padding: 0.75rem;">Position</th>
                                            <th style="text-align: left; padding: 0.75rem;">Applications</th>
                                            <th style="text-align: left; padding: 0.75rem;">Fill Rate</th>
                                            <th style="text-align: left; padding: 0.75rem;">Avg. Rate</th>
                                            <th style="text-align: left; padding: 0.75rem;">Revenue</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom: 1px solid var(--border-light);">
                                            <td style="padding: 0.75rem;">Emergency Medicine Physician</td>
                                            <td style="padding: 0.75rem;">47</td>
                                            <td style="padding: 0.75rem; color: var(--success-color);">85%</td>
                                            <td style="padding: 0.75rem;">$350/hr</td>
                                            <td style="padding: 0.75rem; color: var(--success-color);">$142k</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--border-light);">
                                            <td style="padding: 0.75rem;">Anesthesiologist</td>
                                            <td style="padding: 0.75rem;">32</td>
                                            <td style="padding: 0.75rem; color: var(--success-color);">78%</td>
                                            <td style="padding: 0.75rem;">$425/hr</td>
                                            <td style="padding: 0.75rem; color: var(--success-color);">$118k</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--border-light);">
                                            <td style="padding: 0.75rem;">Internal Medicine Hospitalist</td>
                                            <td style="padding: 0.75rem;">41</td>
                                            <td style="padding: 0.75rem; color: var(--warning-color);">72%</td>
                                            <td style="padding: 0.75rem;">$285/hr</td>
                                            <td style="padding: 0.75rem; color: var(--success-color);">$98k</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 0.75rem;">General Surgeon</td>
                                            <td style="padding: 0.75rem;">28</td>
                                            <td style="padding: 0.75rem; color: var(--warning-color);">68%</td>
                                            <td style="padding: 0.75rem;">$380/hr</td>
                                            <td style="padding: 0.75rem; color: var(--success-color);">$89k</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Other Tab Content (Hidden by default) -->
                        <div id="performance-tab" class="analytics-tab-content" style="display: none;">
                            <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                                <h3>Job Performance Analytics</h3>
                                <p>Detailed job posting performance metrics, application rates, and conversion analytics.</p>
                                <button class="btn primary" style="margin-top: 1rem;">Generate Performance Report</button>
                            </div>
                        </div>
                        
                        <div id="conversion-tab" class="analytics-tab-content" style="display: none;">
                            <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                                <h3>Conversion Rate Analysis</h3>
                                <p>Application to hire conversion rates, funnel analysis, and optimization insights.</p>
                                <button class="btn primary" style="margin-top: 1rem;">Generate Conversion Report</button>
                            </div>
                        </div>
                        
                        <div id="market-tab" class="analytics-tab-content" style="display: none;">
                            <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                                <h3>Market Rate Analysis</h3>
                                <p>Competitive rate analysis, market trends, and pricing optimization recommendations.</p>
                                <button class="btn primary" style="margin-top: 1rem;">Generate Market Report</button>
                            </div>
                        </div>
                        
                        <div id="revenue-tab" class="analytics-tab-content" style="display: none;">
                            <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                                <h3>Revenue Tracking</h3>
                                <p>Revenue analytics, commission tracking, and financial performance metrics.</p>
                                <button class="btn primary" style="margin-top: 1rem;">Generate Revenue Report</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Initialize charts after modal is added to DOM
            setTimeout(() => {
                initializeAnalyticsCharts();
            }, 100);
        }
        
        function closeAnalyticsModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        function switchAnalyticsTab(tabName) {
            // Update tab buttons
            const tabs = document.querySelectorAll('.analytics-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Update tab content
            const contents = document.querySelectorAll('.analytics-tab-content');
            contents.forEach(content => content.style.display = 'none');
            document.getElementById(`${tabName}-tab`).style.display = 'block';
        }
        
        function updateAnalyticsPeriod() {
            const period = document.getElementById('analytics-period').value;
            const fromDate = document.getElementById('analytics-from');
            const toDate = document.getElementById('analytics-to');
            const applyBtn = document.getElementById('apply-date-btn');
            
            if (period === 'custom') {
                fromDate.style.display = 'inline-block';
                toDate.style.display = 'inline-block';
                applyBtn.style.display = 'inline-block';
            } else {
                fromDate.style.display = 'none';
                toDate.style.display = 'none';
                applyBtn.style.display = 'none';
                
                // Apply preset period
                showNotification(`Analytics updated for last ${period} days`, 'info');
            }
        }
        
        function applyAnalyticsDateRange() {
            const fromDate = document.getElementById('analytics-from').value;
            const toDate = document.getElementById('analytics-to').value;
            
            if (!fromDate || !toDate) {
                showNotification('Please select both start and end dates', 'error');
                return;
            }
            
            if (new Date(fromDate) > new Date(toDate)) {
                showNotification('Start date must be before end date', 'error');
                return;
            }
            
            showNotification(`Analytics updated for custom date range: ${fromDate} to ${toDate}`, 'info');
        }
        
        function exportAnalytics() {
            showNotification('Generating analytics report...', 'info');
            
            setTimeout(() => {
                // Create CSV content
                const csvContent = `Analytics Report - Generated ${formatDate(new Date())}\n\nKey Metrics:\nJobs Posted,24\nTotal Applicants,156\nPositions Filled,8\nAvg Days to Fill,6.5\nRevenue Generated,$487k\nClient Satisfaction,92%\n\nTop Performing Positions:\nPosition,Applications,Fill Rate,Avg Rate,Revenue\nEmergency Medicine Physician,47,85%,$350/hr,$142k\nAnesthesiologist,32,78%,$425/hr,$118k\nInternal Medicine Hospitalist,41,72%,$285/hr,$98k\nGeneral Surgeon,28,68%,$380/hr,$89k`;
                
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                
                if (link.download !== undefined) {
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', `analytics_report_${formatDate(new Date(), 'iso')}.csv`);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    showNotification('Analytics report exported successfully!', 'success');
                } else {
                    showNotification('Export not supported in this browser', 'error');
                }
            }, 1500);
        }
        
        function initializeAnalyticsCharts() {
            // Initialize Specialty Chart (Pie Chart)
            const specialtyCanvas = document.getElementById('specialty-chart');
            if (specialtyCanvas) {
                const ctx = specialtyCanvas.getContext('2d');
                
                // Draw pie chart for specialties
                const data = [
                    { label: 'Emergency Medicine', value: 47, color: '#2563eb' },
                    { label: 'Internal Medicine', value: 41, color: '#10b981' },
                    { label: 'Anesthesiology', value: 32, color: '#f59e0b' },
                    { label: 'Surgery', value: 28, color: '#ef4444' },
                    { label: 'Other', value: 8, color: '#64748b' }
                ];
                
                const total = data.reduce((sum, item) => sum + item.value, 0);
                let currentAngle = 0;
                const centerX = specialtyCanvas.width / 2;
                const centerY = specialtyCanvas.height / 2;
                const radius = Math.min(centerX, centerY) * 0.8;
                
                data.forEach(item => {
                    const sliceAngle = (item.value / total) * 2 * Math.PI;
                    
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                    ctx.lineTo(centerX, centerY);
                    ctx.fillStyle = item.color;
                    ctx.fill();
                    
                    currentAngle += sliceAngle;
                });
                
                // Add legend below chart
                const legendY = specialtyCanvas.height - 10;
                ctx.font = '10px Arial';
                data.forEach((item, index) => {
                    const x = 10 + (index * 50);
                    ctx.fillStyle = item.color;
                    ctx.fillRect(x, legendY, 8, 8);
                    ctx.fillStyle = '#000';
                    ctx.fillText(item.value.toString(), x + 12, legendY + 7);
                });
            }
            
            // Initialize Trend Chart (Line Chart)
            const trendCanvas = document.getElementById('trend-chart');
            if (trendCanvas) {
                const ctx = trendCanvas.getContext('2d');
                
                // Draw line chart for monthly trends
                const months = ['Oct', 'Nov', 'Dec', 'Jan'];
                const applications = [120, 135, 142, 156];
                const placements = [5, 6, 7, 8];
                
                const chartWidth = trendCanvas.width - 60;
                const chartHeight = trendCanvas.height - 60;
                const startX = 40;
                const startY = 40;
                
                // Draw axes
                ctx.strokeStyle = '#e2e8f0';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(startX, startY + chartHeight);
                ctx.lineTo(startX + chartWidth, startY + chartHeight);
                ctx.stroke();
                
                // Draw applications line
                ctx.strokeStyle = '#2563eb';
                ctx.lineWidth = 2;
                ctx.beginPath();
                applications.forEach((value, index) => {
                    const x = startX + (index * chartWidth / (applications.length - 1));
                    const y = startY + chartHeight - (value / 180 * chartHeight);
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // Draw data point
                    ctx.fillStyle = '#2563eb';
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, 2 * Math.PI);
                    ctx.fill();
                });
                ctx.stroke();
                
                // Draw placements line
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 2;
                ctx.beginPath();
                placements.forEach((value, index) => {
                    const x = startX + (index * chartWidth / (placements.length - 1));
                    const y = startY + chartHeight - (value / 10 * chartHeight);
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // Draw data point
                    ctx.fillStyle = '#10b981';
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, 2 * Math.PI);
                    ctx.fill();
                });
                ctx.stroke();
                
                // Add month labels
                ctx.fillStyle = '#64748b';
                ctx.font = '12px Arial';
                months.forEach((month, index) => {
                    const x = startX + (index * chartWidth / (months.length - 1));
                    ctx.fillText(month, x - 10, startY + chartHeight + 15);
                });
                
                // Add legend
                ctx.fillStyle = '#2563eb';
                ctx.fillRect(startX, 10, 10, 10);
                ctx.fillStyle = '#000';
                ctx.fillText('Applications', startX + 15, 19);
                
                ctx.fillStyle = '#10b981';
                ctx.fillRect(startX + 100, 10, 10, 10);
                ctx.fillStyle = '#000';
                ctx.fillText('Placements', startX + 115, 19);
            }
        }

        function filterJobs(filter) {
            // Update filter button states
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filter table rows
            const rows = document.querySelectorAll('#jobs-table-body tr');
            let visibleCount = 0;
            
            rows.forEach(row => {
                const status = row.getAttribute('data-status');
                if (filter === 'all' || status === filter) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });
            
            // Show notification
            showNotification(`Showing ${visibleCount} ${filter === 'all' ? '' : filter} job${visibleCount !== 1 ? 's' : ''}`, 'info');
            
            // Update pagination after filtering
            jobsPagination.currentPage = 1; // Reset to first page
            updateJobsPagination();
        }

        function viewJob(jobId) {
            alert(`Viewing job details for Job ID: ${jobId}\n\nThis would open a detailed view showing:\n Complete job description\n Applicant list and status\n Performance metrics\n Edit options`);
        }

        function editJob(jobId) {
            // Find the job row data
            const jobRow = document.querySelector(`tr[data-job-id="${jobId}"]`);
            if (!jobRow) {
                showNotification('Job not found', 'error');
                return;
            }
            
            // Extract existing data from the row
            const cells = jobRow.cells;
            const currentTitle = cells[0].textContent;
            const currentFacility = cells[1].textContent;
            const locationParts = cells[2].textContent.split(', ');
            const currentCity = locationParts[0];
            const currentState = locationParts[1];
            const currentRate = cells[3].getAttribute('data-sort-value');
            const currentStatus = jobRow.getAttribute('data-status');
            
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Edit Job - ${currentTitle}</h2>
                        <button onclick="closeJobModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <form class="compose-form" onsubmit="updateJob(event, ${jobId})">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Position Title *</label>
                                <input type="text" id="edit-job-title" value="${currentTitle}" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Specialty *</label>
                                <select id="edit-job-specialty" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="">Select Specialty</option>
                                    <option value="emergency-medicine">Emergency Medicine</option>
                                    <option value="internal-medicine">Internal Medicine</option>
                                    <option value="anesthesiology">Anesthesiology</option>
                                    <option value="surgery">Surgery</option>
                                    <option value="cardiology">Cardiology</option>
                                    <option value="neurology">Neurology</option>
                                    <option value="radiology">Radiology</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Facility Name *</label>
                                <input type="text" id="edit-job-facility" value="${currentFacility}" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Facility Type</label>
                                <select id="edit-job-facility-type" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="hospital">Hospital</option>
                                    <option value="clinic">Clinic</option>
                                    <option value="urgent-care">Urgent Care</option>
                                    <option value="surgery-center">Surgery Center</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">City *</label>
                                <input type="text" id="edit-job-city" value="${currentCity}" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">State *</label>
                                <select id="edit-job-state" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="">Select State</option>
                                    <option value="CA" ${currentState === 'CA' ? 'selected' : ''}>California</option>
                                    <option value="TX" ${currentState === 'TX' ? 'selected' : ''}>Texas</option>
                                    <option value="FL" ${currentState === 'FL' ? 'selected' : ''}>Florida</option>
                                    <option value="NY" ${currentState === 'NY' ? 'selected' : ''}>New York</option>
                                    <option value="IL" ${currentState === 'IL' ? 'selected' : ''}>Illinois</option>
                                    <option value="CO" ${currentState === 'CO' ? 'selected' : ''}>Colorado</option>
                                    <option value="WA" ${currentState === 'WA' ? 'selected' : ''}>Washington</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ZIP Code</label>
                                <input type="text" id="edit-job-zip" placeholder="90210" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Hourly Rate *</label>
                                <input type="number" id="edit-job-rate" value="${currentRate}" min="0" step="0.01" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Job Status</label>
                                <select id="edit-job-status" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="active" ${currentStatus === 'active' ? 'selected' : ''}>Active</option>
                                    <option value="pending" ${currentStatus === 'pending' ? 'selected' : ''}>Pending</option>
                                    <option value="filled" ${currentStatus === 'filled' ? 'selected' : ''}>Filled</option>
                                    <option value="expired" ${currentStatus === 'expired' ? 'selected' : ''}>Expired</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Duration</label>
                                <select id="edit-job-duration" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="1-week">1 Week</option>
                                    <option value="2-weeks">2 Weeks</option>
                                    <option value="1-month" selected>1 Month</option>
                                    <option value="3-months">3 Months</option>
                                    <option value="6-months">6 Months</option>
                                    <option value="ongoing">Ongoing</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Job Description</label>
                            <textarea id="edit-job-description" placeholder="Describe the position, responsibilities, and requirements..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; min-height: 120px; resize: vertical;">We are seeking a qualified ${currentTitle} to join our team at ${currentFacility}.</textarea>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Required Experience</label>
                                <select id="edit-job-experience" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="entry">Entry Level (0-2 years)</option>
                                    <option value="mid">Mid Level (3-7 years)</option>
                                    <option value="senior" selected>Senior Level (8+ years)</option>
                                    <option value="expert">Expert Level (15+ years)</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Call Requirements</label>
                                <select id="edit-job-call" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="none">No Call</option>
                                    <option value="light">Light Call (1-2 nights/month)</option>
                                    <option value="moderate" selected>Moderate Call (3-5 nights/month)</option>
                                    <option value="heavy">Heavy Call (6+ nights/month)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                            <button type="button" class="btn secondary" onclick="closeJobModal()">Cancel</button>
                            <button type="button" class="btn-small error" onclick="deleteJobFromEdit(${jobId})">Delete Job</button>
                            <button type="submit" class="btn primary">Update Job</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function updateJob(event, jobId) {
            event.preventDefault();
            
            const jobData = {
                title: document.getElementById('edit-job-title').value,
                facility: document.getElementById('edit-job-facility').value,
                city: document.getElementById('edit-job-city').value,
                state: document.getElementById('edit-job-state').value,
                rate: document.getElementById('edit-job-rate').value,
                status: document.getElementById('edit-job-status').value
            };
            
            // Update the job row
            const jobRow = document.querySelector(`tr[data-job-id="${jobId}"]`);
            if (jobRow) {
                jobRow.cells[0].textContent = jobData.title;
                jobRow.cells[1].textContent = jobData.facility;
                jobRow.cells[2].textContent = `${jobData.city}, ${jobData.state}`;
                jobRow.cells[3].innerHTML = `$${jobData.rate}/hr`;
                jobRow.cells[3].setAttribute('data-sort-value', jobData.rate);
                jobRow.setAttribute('data-status', jobData.status);
                
                // Update the status dropdown in the row
                const statusDropdown = jobRow.querySelector('.status-dropdown');
                if (statusDropdown) {
                    statusDropdown.value = jobData.status;
                }
            }
            
            // Update stats and pagination
            updateDashboardStats();
            updateJobsPagination();
            
            showNotification('Job updated successfully!', 'success');
            closeJobModal();
        }

        function deleteJobFromEdit(jobId) {
            if (confirm('Are you sure you want to delete this job posting?')) {
                const jobRow = document.querySelector(`tr[data-job-id="${jobId}"]`);
                if (jobRow) {
                    jobRow.remove();
                    updateDashboardStats();
                    updateJobsPagination();
                    showNotification('Job deleted successfully', 'success');
                    closeJobModal();
                }
            }
        }

        function deleteJob(jobId) {
            if (confirm(`Are you sure you want to delete this job posting?`)) {
                alert(`Job posting ${jobId} has been deleted.\n\n Applicants have been notified\n Posting removed from all boards\n Data archived for reporting`);
            }
        }

        function viewApplicant(applicantId) {
            showApplicantModal(applicantId);
        }

        function contactApplicant(applicantId) {
            alert(`Contacting applicant ${applicantId}...\n\nCommunication options:\n Send message through platform\n Schedule phone interview\n Request additional documents\n Share job details and next steps`);
        }

        function viewAllApplicants() {
            // Show notification to confirm the function is being called
            showNotification('Opening all applicants view...', 'info');
            
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 1000px; max-height: 90vh;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">All Applicants</h2>
                        <button onclick="closeAllApplicantsModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <!-- Search and Filter Controls -->
                    <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--background-color); border-radius: 0.5rem;">
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <input type="text" id="applicant-search" placeholder="Search by name, specialty, or location..." style="flex: 1; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                            <select id="specialty-filter" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                                <option value="">All Specialties</option>
                                <option value="emergency-medicine">Emergency Medicine</option>
                                <option value="internal-medicine">Internal Medicine</option>
                                <option value="anesthesiology">Anesthesiology</option>
                                <option value="surgery">Surgery</option>
                                <option value="cardiology">Cardiology</option>
                            </select>
                            <select id="status-filter" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                                <option value="">All Status</option>
                                <option value="applied">Applied</option>
                                <option value="reviewed">Reviewed</option>
                                <option value="interviewed">Interviewed</option>
                                <option value="offered">Offered</option>
                                <option value="hired">Hired</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn-small secondary" onclick="searchApplicants()"> Search</button>
                            <button class="btn-small primary" onclick="exportAllApplicants()"> Export</button>
                        </div>
                    </div>
                    
                    <!-- Applicants Table -->
                    <div style="overflow-y: auto; max-height: 500px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead style="background: var(--background-color); position: sticky; top: 0;">
                                <tr>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">
                                        <input type="checkbox" id="select-all-applicants" onchange="toggleAllApplicants()"> Name
                                    </th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Specialty</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Experience</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Applied To</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Status</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Rating</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="all-applicants-table">
                                <tr>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <input type="checkbox" class="applicant-checkbox"> Dr. Michael Rodriguez
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Emergency Medicine</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">8 years</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">EM Physician - LA</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <select class="status-dropdown" style="font-size: 0.8rem;">
                                            <option value="applied" selected>Applied</option>
                                            <option value="reviewed">Reviewed</option>
                                            <option value="interviewed">Interviewed</option>
                                            <option value="offered">Offered</option>
                                            <option value="hired">Hired</option>
                                        </select>
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);"> 4.9</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <button class="btn-small primary" onclick="viewApplicant(1)">View</button>
                                        <button class="btn-small secondary" onclick="contactApplicant(1)">Contact</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <input type="checkbox" class="applicant-checkbox"> Dr. Sarah Kim
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Internal Medicine</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">12 years</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Hospitalist - Houston</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <select class="status-dropdown" style="font-size: 0.8rem;">
                                            <option value="applied">Applied</option>
                                            <option value="reviewed" selected>Reviewed</option>
                                            <option value="interviewed">Interviewed</option>
                                            <option value="offered">Offered</option>
                                            <option value="hired">Hired</option>
                                        </select>
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);"> 4.8</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <button class="btn-small primary" onclick="viewApplicant(2)">View</button>
                                        <button class="btn-small secondary" onclick="contactApplicant(2)">Contact</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <input type="checkbox" class="applicant-checkbox"> Dr. Amanda Patel
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Anesthesiology</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">15 years</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Anesthesiologist - Miami</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <select class="status-dropdown" style="font-size: 0.8rem;">
                                            <option value="applied">Applied</option>
                                            <option value="reviewed">Reviewed</option>
                                            <option value="interviewed" selected>Interviewed</option>
                                            <option value="offered">Offered</option>
                                            <option value="hired">Hired</option>
                                        </select>
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);"> 4.7</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <button class="btn-small primary" onclick="viewApplicant(3)">View</button>
                                        <button class="btn-small secondary" onclick="contactApplicant(3)">Contact</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <input type="checkbox" class="applicant-checkbox"> Dr. James Wilson
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Cardiology</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">10 years</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">Cardiologist - Seattle</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <select class="status-dropdown" style="font-size: 0.8rem;">
                                            <option value="applied">Applied</option>
                                            <option value="reviewed">Reviewed</option>
                                            <option value="interviewed">Interviewed</option>
                                            <option value="offered" selected>Offered</option>
                                            <option value="hired">Hired</option>
                                        </select>
                                    </td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);"> 4.9</td>
                                    <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-light);">
                                        <button class="btn-small primary" onclick="viewApplicant(4)">View</button>
                                        <button class="btn-small secondary" onclick="contactApplicant(4)">Contact</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Bulk Actions -->
                    <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <span id="selected-count" style="color: var(--text-secondary);">0 selected</span>
                            <button class="btn-small secondary" onclick="bulkUpdateStatus()" disabled id="bulk-update-btn">Update Status</button>
                            <button class="btn-small secondary" onclick="bulkMessage()" disabled id="bulk-message-btn">Send Message</button>
                        </div>
                        <button class="btn secondary" onclick="closeAllApplicantsModal()">Close</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Initialize checkbox handlers
            initializeApplicantCheckboxes();
        }

        function closeAllApplicantsModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }

        function initializeApplicantCheckboxes() {
            const checkboxes = document.querySelectorAll('.applicant-checkbox');
            const selectAll = document.getElementById('select-all-applicants');
            const selectedCount = document.getElementById('selected-count');
            const bulkUpdateBtn = document.getElementById('bulk-update-btn');
            const bulkMessageBtn = document.getElementById('bulk-message-btn');
            
            function updateSelectedCount() {
                const checkedCount = document.querySelectorAll('.applicant-checkbox:checked').length;
                selectedCount.textContent = `${checkedCount} selected`;
                
                const hasSelection = checkedCount > 0;
                bulkUpdateBtn.disabled = !hasSelection;
                bulkMessageBtn.disabled = !hasSelection;
            }
            
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateSelectedCount);
            });
            
            selectAll.addEventListener('change', function() {
                checkboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
                updateSelectedCount();
            });
        }

        function searchApplicants() {
            const searchTerm = document.getElementById('applicant-search').value.toLowerCase();
            const specialtyFilter = document.getElementById('specialty-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            
            showNotification(`Searching for: "${searchTerm}" | Specialty: ${specialtyFilter || 'All'} | Status: ${statusFilter || 'All'}`, 'info');
        }

        function toggleAllApplicants() {
            const selectAll = document.getElementById('select-all-applicants');
            const checkboxes = document.querySelectorAll('.applicant-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
            
            const selectedCount = document.getElementById('selected-count');
            selectedCount.textContent = `${selectAll.checked ? checkboxes.length : 0} selected`;
        }

        function bulkUpdateStatus() {
            const checkedCount = document.querySelectorAll('.applicant-checkbox:checked').length;
            showNotification(`Bulk status update for ${checkedCount} applicants would open here`, 'info');
        }

        function bulkMessage() {
            const checkedApplicants = document.querySelectorAll('.applicant-checkbox:checked');
            const checkedCount = checkedApplicants.length;
            
            if (checkedCount === 0) {
                showNotification('Please select applicants to message', 'error');
                return;
            }
            
            // Get names of selected applicants
            const selectedNames = [];
            checkedApplicants.forEach(checkbox => {
                const row = checkbox.closest('tr');
                const nameCell = row.cells[0];
                // Extract name from cell content (remove checkbox text)
                const nameText = nameCell.textContent.trim();
                selectedNames.push(nameText);
            });
            
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 700px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Send Message to ${checkedCount} Applicant${checkedCount > 1 ? 's' : ''}</h2>
                        <button onclick="closeBulkMessageModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <!-- Recipients List -->
                    <div style="background: var(--background-color); padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-secondary);">Recipients:</label>
                        <div style="max-height: 120px; overflow-y: auto;">
                            ${selectedNames.map(name => `<div style="padding: 0.25rem 0; color: var(--text-primary);"> ${name}</div>`).join('')}
                        </div>
                    </div>
                    
                    <form class="bulk-message-form" onsubmit="sendBulkMessage(event)">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Message Type:</label>
                            <select id="bulk-message-type" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;" onchange="updateBulkMessageTemplate()">
                                <option value="custom">Custom Message</option>
                                <option value="interview-invite">Interview Invitation</option>
                                <option value="status-update">Application Status Update</option>
                                <option value="additional-info">Request Additional Information</option>
                                <option value="position-update">Position Details Update</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Subject:</label>
                            <input type="text" id="bulk-subject" placeholder="Message subject" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Message:</label>
                            <textarea id="bulk-message" placeholder="Type your message here..." required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; min-height: 150px; resize: vertical;"></textarea>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: space-between; align-items: center;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-secondary);">
                                <input type="checkbox" id="send-copy-to-self" checked>
                                Send copy to myself
                            </label>
                            <div style="display: flex; gap: 1rem;">
                                <button type="button" class="btn secondary" onclick="closeBulkMessageModal()">Cancel</button>
                                <button type="submit" class="btn primary">Send to ${checkedCount} Recipient${checkedCount > 1 ? 's' : ''}</button>
                            </div>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function closeBulkMessageModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        function updateBulkMessageTemplate() {
            const messageType = document.getElementById('bulk-message-type').value;
            const subjectField = document.getElementById('bulk-subject');
            const messageField = document.getElementById('bulk-message');
            
            const templates = {
                'interview-invite': {
                    subject: 'Interview Invitation - Healthcare Position',
                    message: `Dear [Applicant Name],

Thank you for your interest in our healthcare position. We would like to schedule an interview to discuss your qualifications and experience.

Please let us know your availability for the following time slots:
 [Date/Time Option 1]
 [Date/Time Option 2]
 [Date/Time Option 3]

The interview will be conducted [virtually/in-person] and should take approximately [duration].

Please confirm your preferred time by replying to this message.

We look forward to speaking with you.

Best regards,
Sarah Johnson
Senior Healthcare Recruiter`
                },
                'status-update': {
                    subject: 'Application Status Update',
                    message: `Dear [Applicant Name],

I wanted to provide you with an update on your application for our healthcare position.

Your application is currently under review by our clinical team. We will contact you within the next [timeframe] with next steps.

If you have any questions or need to update any information, please don't hesitate to reach out.

Thank you for your continued interest.

Best regards,
Sarah Johnson
Senior Healthcare Recruiter`
                },
                'additional-info': {
                    subject: 'Additional Information Requested',
                    message: `Dear [Applicant Name],

Thank you for your application. To continue with the review process, we need some additional information:

 [Specific document/information needed]
 [Additional requirement]
 [Any other details]

Please provide these materials at your earliest convenience. You can reply to this email or upload documents through our portal.

Thank you for your cooperation.

Best regards,
Sarah Johnson
Senior Healthcare Recruiter`
                },
                'position-update': {
                    subject: 'Position Details Update',
                    message: `Dear [Applicant Name],

I wanted to update you on some changes to the position you applied for:

[Details of changes/updates]

These changes [do/do not] affect the application timeline. We appreciate your continued interest and will keep you informed of any further developments.

If you have any questions about these updates, please let me know.

Best regards,
Sarah Johnson
Senior Healthcare Recruiter`
                }
            };
            
            if (templates[messageType]) {
                subjectField.value = templates[messageType].subject;
                messageField.value = templates[messageType].message;
            } else {
                subjectField.value = '';
                messageField.value = '';
            }
        }
        
        function sendBulkMessage(event) {
            event.preventDefault();
            
            const messageType = document.getElementById('bulk-message-type').value;
            const subject = document.getElementById('bulk-subject').value;
            const message = document.getElementById('bulk-message').value;
            const sendCopy = document.getElementById('send-copy-to-self').checked;
            const checkedCount = document.querySelectorAll('.applicant-checkbox:checked').length;
            
            // Simulate sending process
            showNotification('Sending messages...', 'info');
            
            setTimeout(() => {
                showNotification(`Messages sent successfully to ${checkedCount} applicant${checkedCount > 1 ? 's' : ''}!`, 'success');
                
                if (sendCopy) {
                    setTimeout(() => {
                        showNotification('Copy sent to your inbox', 'info');
                    }, 1000);
                }
                
                closeBulkMessageModal();
                
                // Clear selections after sending
                const checkboxes = document.querySelectorAll('.applicant-checkbox');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // Update bulk action button states
                const selectedCount = document.getElementById('selected-count');
                const bulkUpdateBtn = document.getElementById('bulk-update-btn');
                const bulkMessageBtn = document.getElementById('bulk-message-btn');
                
                selectedCount.textContent = '0 selected';
                bulkUpdateBtn.disabled = true;
                bulkMessageBtn.disabled = true;
                
                // Uncheck select all
                const selectAll = document.getElementById('select-all-applicants');
                if (selectAll) {
                    selectAll.checked = false;
                }
                
            }, 2000);
        }

        function exportAllApplicants() {
            showNotification('Generating comprehensive applicant report...', 'info');
            setTimeout(() => {
                exportApplicants();
            }, 1000);
        }

        function exportApplicants() {
            // Create CSV data
            const csvData = [
                ['Name', 'Specialty', 'Experience', 'Applied To', 'Status', 'Rating', 'Email', 'Phone', 'Date Applied'],
                ['Dr. Michael Rodriguez', 'Emergency Medicine', '8 years', 'EM Physician - LA', 'Applied', '4.9', 'michael.rodriguez@email.com', '(555) 123-4567', '2025-01-10'],
                ['Dr. Sarah Kim', 'Internal Medicine', '12 years', 'Hospitalist - Houston', 'Reviewed', '4.8', 'sarah.kim@email.com', '(555) 234-5678', '2025-01-09'],
                ['Dr. Amanda Patel', 'Anesthesiology', '15 years', 'Anesthesiologist - Miami', 'Interviewed', '4.7', 'amanda.patel@email.com', '(555) 345-6789', '2025-01-08'],
                ['Dr. James Wilson', 'Cardiology', '10 years', 'Cardiologist - Seattle', 'Offered', '4.9', 'james.wilson@email.com', '(555) 456-7890', '2025-01-07'],
                ['Dr. Lisa Chen', 'Radiology', '6 years', 'Radiologist - Phoenix', 'Applied', '4.6', 'lisa.chen@email.com', '(555) 567-8901', '2025-01-06'],
                ['Dr. Robert Martinez', 'Surgery', '18 years', 'General Surgeon - Chicago', 'Hired', '4.8', 'robert.martinez@email.com', '(555) 678-9012', '2025-01-05']
            ];
            
            // Convert to CSV string
            const csvContent = csvData.map(row => 
                row.map(field => `"${field}"`).join(',')
            ).join('\n');
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `applicants_export_${formatDate(new Date(), 'iso')}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('Applicant data exported successfully!', 'success');
            } else {
                showNotification('Export not supported in this browser', 'error');
            }
        }

        function changeTimeframe(period) {
            const buttons = document.querySelectorAll('.section-actions .btn-small.secondary');
            buttons.forEach(btn => btn.classList.remove('primary'));
            event.target.classList.add('primary');
            
            // Clear custom date inputs when using preset ranges
            document.getElementById('analytics-start-date').value = '';
            document.getElementById('analytics-end-date').value = '';
            
            showNotification(`Analytics updated for ${period} view`, 'info');
            
            // Update chart with new timeframe data
            drawPerformanceChart(period);
        }

        function applyCustomDateRange() {
            const startDate = document.getElementById('analytics-start-date').value;
            const endDate = document.getElementById('analytics-end-date').value;
            
            if (!startDate || !endDate) {
                showNotification('Please select both start and end dates', 'error');
                return;
            }
            
            if (new Date(startDate) > new Date(endDate)) {
                showNotification('Start date must be before end date', 'error');
                return;
            }
            
            // Clear preset button highlights
            const buttons = document.querySelectorAll('.section-actions .btn-small.secondary');
            buttons.forEach(btn => btn.classList.remove('primary'));
            
            // Calculate date range duration for appropriate chart data
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            let period;
            if (diffDays <= 14) {
                period = 'week';  // Short range uses daily data
            } else if (diffDays <= 93) {
                period = 'month'; // Medium range uses weekly data
            } else {
                period = 'quarter'; // Long range uses monthly data
            }
            
            const formatStart = start.toLocaleDateString();
            const formatEnd = end.toLocaleDateString();
            showNotification(`Analytics updated for custom range: ${formatStart} - ${formatEnd}`, 'info');
            
            // Update chart with custom range data
            drawPerformanceChart(period, { startDate, endDate, customRange: true });
        }

        // Simulate real-time updates
        function updateDashboard() {
            // This would typically fetch real data from an API
            console.log('Dashboard updated with latest data');
        }

        // Metrics Controls Functions
        function updateMetricsPeriod() {
            const period = document.getElementById('metrics-period').value;
            const customRange = document.getElementById('custom-date-range');
            
            if (period === 'custom') {
                customRange.style.display = 'flex';
            } else {
                customRange.style.display = 'none';
                refreshMetricsForPeriod(period);
            }
        }

        function refreshMetrics() {
            const period = document.getElementById('metrics-period').value;
            
            if (period === 'custom') {
                const startDate = document.getElementById('metrics-start-date').value;
                const endDate = document.getElementById('metrics-end-date').value;
                
                if (!startDate || !endDate) {
                    showNotification('Please select both start and end dates for custom range', 'error');
                    return;
                }
                
                if (new Date(startDate) > new Date(endDate)) {
                    showNotification('Start date must be before end date', 'error');
                    return;
                }
                
                refreshMetricsForCustomRange(startDate, endDate);
            } else {
                refreshMetricsForPeriod(period);
            }
        }

        function refreshMetricsForPeriod(period) {
            // Show loading state
            const metrics = {
                week: {
                    jobs: { value: 18, change: '+2 this week', trend: 'positive' },
                    applicants: { value: 89, change: '+12 this week', trend: 'positive' },
                    filled: { value: 3, change: '+1 this week', trend: 'positive' },
                    satisfaction: { value: 88, change: '+2% this week', trend: 'positive' }
                },
                month: {
                    jobs: { value: 24, change: '+3 this month', trend: 'positive' },
                    applicants: { value: 156, change: '+18 this month', trend: 'positive' },
                    filled: { value: 8, change: '+2 this month', trend: 'positive' },
                    satisfaction: { value: 92, change: '+5% this month', trend: 'positive' }
                },
                quarter: {
                    jobs: { value: 67, change: '+12 this quarter', trend: 'positive' },
                    applicants: { value: 423, change: '+67 this quarter', trend: 'positive' },
                    filled: { value: 28, change: '+8 this quarter', trend: 'positive' },
                    satisfaction: { value: 94, change: '+7% this quarter', trend: 'positive' }
                },
                year: {
                    jobs: { value: 284, change: '+52 this year', trend: 'positive' },
                    applicants: { value: 1847, change: '+312 this year', trend: 'positive' },
                    filled: { value: 142, change: '+38 this year', trend: 'positive' },
                    satisfaction: { value: 91, change: '+3% this year', trend: 'positive' }
                }
            };

            const data = metrics[period];
            updateMetricCards(data);
            showNotification(`Metrics updated for ${period} period`, 'success');
        }

        function refreshMetricsForCustomRange(startDate, endDate) {
            // Simulate custom range calculation
            const data = {
                jobs: { value: 15, change: `+4 (${startDate} to ${endDate})`, trend: 'positive' },
                applicants: { value: 73, change: `+11 (${startDate} to ${endDate})`, trend: 'positive' },
                filled: { value: 5, change: `+2 (${startDate} to ${endDate})`, trend: 'positive' },
                satisfaction: { value: 89, change: `+3% (${startDate} to ${endDate})`, trend: 'positive' }
            };

            updateMetricCards(data);
            showNotification(`Metrics updated for custom range: ${startDate} to ${endDate}`, 'success');
        }

        function updateMetricCards(data) {
            // Update each metric card with new values
            const cards = document.querySelectorAll('.stat-card');
            cards[0].querySelector('.stat-value').textContent = data.jobs.value;
            cards[0].querySelector('.stat-change').textContent = ` ${data.jobs.change}`;
            
            cards[1].querySelector('.stat-value').textContent = data.applicants.value;
            cards[1].querySelector('.stat-change').textContent = ` ${data.applicants.change}`;
            
            cards[2].querySelector('.stat-value').textContent = data.filled.value;
            cards[2].querySelector('.stat-change').textContent = ` ${data.filled.change}`;
            
            cards[3].querySelector('.stat-value').textContent = `${data.satisfaction.value}%`;
            cards[3].querySelector('.stat-change').textContent = ` ${data.satisfaction.change}`;
        }

        // Update dashboard every 30 seconds (in a real app)
        // setInterval(updateDashboard, 30000);

        // Table sorting functionality
        let sortDirection = {};
        
        function sortTable(columnIndex) {
            const table = document.getElementById('jobs-table-body');
            const rows = Array.from(table.rows);
            const isNumeric = columnIndex === 3 || columnIndex === 4; // Rate and Applicants columns
            const isDate = columnIndex === 5; // Posted date column
            
            // Toggle sort direction
            sortDirection[columnIndex] = sortDirection[columnIndex] === 'asc' ? 'desc' : 'asc';
            
            rows.sort((a, b) => {
                let aValue, bValue;
                
                if (isNumeric) {
                    aValue = parseFloat(a.cells[columnIndex].getAttribute('data-sort-value') || '0');
                    bValue = parseFloat(b.cells[columnIndex].getAttribute('data-sort-value') || '0');
                } else if (isDate) {
                    aValue = new Date(a.cells[columnIndex].getAttribute('data-sort-value'));
                    bValue = new Date(b.cells[columnIndex].getAttribute('data-sort-value'));
                } else {
                    aValue = a.cells[columnIndex].textContent.toLowerCase();
                    bValue = b.cells[columnIndex].textContent.toLowerCase();
                }
                
                if (sortDirection[columnIndex] === 'asc') {
                    return aValue > bValue ? 1 : -1;
                } else {
                    return aValue < bValue ? 1 : -1;
                }
            });
            
            // Clear table and re-add sorted rows
            table.innerHTML = '';
            rows.forEach(row => table.appendChild(row));
            
            // Update sort indicators
            updateSortIndicators(columnIndex);
        }
        
        function updateSortIndicators(activeColumn) {
            const headers = document.querySelectorAll('.sort-indicator');
            headers.forEach((indicator, index) => {
                if (index === activeColumn) {
                    indicator.textContent = sortDirection[activeColumn] === 'asc' ? '' : '';
                    indicator.classList.add('active');
                } else {
                    indicator.textContent = '';
                    indicator.classList.remove('active');
                }
            });
        }
        
        // Job status change functionality
        function changeJobStatus(jobId, newStatus) {
            const row = document.querySelector(`tr[data-job-id="${jobId}"]`);
            if (row) {
                const oldStatus = row.getAttribute('data-status');
                const jobTitle = row.cells[0].textContent;
                
                // Update row status
                row.setAttribute('data-status', newStatus);
                
                // Update stats immediately
                updateDashboardStats();
                
                // Capitalize status for display
                const displayStatus = newStatus.charAt(0).toUpperCase() + newStatus.slice(1);
                const oldDisplayStatus = oldStatus.charAt(0).toUpperCase() + oldStatus.slice(1);
                
                // Show confirmation toast
                showNotification(`"${jobTitle}" status changed from ${oldDisplayStatus} to ${displayStatus}`, 'success');
                
                // Visual feedback - briefly highlight the row
                row.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
                setTimeout(() => {
                    row.style.backgroundColor = '';
                }, 1000);
            }
        }
        
        // Applicant modal functionality
        function showApplicantModal(applicantId) {
            const applicantData = {
                1: {
                    name: 'Dr. Michael Rodriguez',
                    specialty: 'Emergency Medicine',
                    experience: '8 years',
                    rating: '4.9/5',
                    appliedTo: 'EM Physician - LA',
                    education: 'MD - Johns Hopkins University',
                    certifications: 'Board Certified Emergency Medicine, ACLS, PALS',
                    availability: 'Immediate'
                },
                2: {
                    name: 'Dr. Sarah Kim',
                    specialty: 'Internal Medicine',
                    experience: '12 years',
                    rating: '4.8/5',
                    appliedTo: 'Hospitalist - Houston',
                    education: 'MD - Stanford University',
                    certifications: 'Board Certified Internal Medicine, ACLS',
                    availability: 'Available in 2 weeks'
                },
                3: {
                    name: 'Dr. Amanda Patel',
                    specialty: 'Anesthesiology',
                    experience: '15 years',
                    rating: '4.7/5',
                    appliedTo: 'Anesthesiologist - Miami',
                    education: 'MD - Harvard Medical School',
                    certifications: 'Board Certified Anesthesiology, ACLS, BLS',
                    availability: 'Available in 1 month'
                }
            };
            
            const applicant = applicantData[applicantId];
            if (!applicant) return;
            
            const modalHTML = `
                <div id="applicant-modal" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                ">
                    <div style="
                        background: white;
                        padding: 2rem;
                        border-radius: 1rem;
                        max-width: 600px;
                        width: 90%;
                        max-height: 80vh;
                        overflow-y: auto;
                    ">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h2 style="color: var(--primary-color);">${applicant.name}</h2>
                            <button onclick="closeApplicantModal()" style="
                                background: none;
                                border: none;
                                font-size: 1.5rem;
                                cursor: pointer;
                                color: var(--text-secondary);
                            "></button>
                        </div>
                        
                        <div style="display: grid; gap: 1rem;">
                            <div><strong>Specialty:</strong> ${applicant.specialty}</div>
                            <div><strong>Experience:</strong> ${applicant.experience}</div>
                            <div><strong>Rating:</strong> ${applicant.rating}</div>
                            <div><strong>Applied To:</strong> ${applicant.appliedTo}</div>
                            <div><strong>Education:</strong> ${applicant.education}</div>
                            <div><strong>Certifications:</strong> ${applicant.certifications}</div>
                            <div><strong>Availability:</strong> ${applicant.availability}</div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: flex-end;">
                            <button onclick="contactApplicant(${applicantId})" style="
                                background: var(--primary-color);
                                color: white;
                                padding: 0.75rem 1.5rem;
                                border: none;
                                border-radius: 0.5rem;
                                cursor: pointer;
                            ">Contact Applicant</button>
                            <button onclick="scheduleInterview(${applicantId})" style="
                                background: var(--accent-color);
                                color: white;
                                padding: 0.75rem 1.5rem;
                                border: none;
                                border-radius: 0.5rem;
                                cursor: pointer;
                            ">Schedule Interview</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }
        
        function closeApplicantModal() {
            const modal = document.getElementById('applicant-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        function scheduleInterview(applicantId) {
            closeApplicantModal();
            showNotification('Interview scheduling feature would open here', 'info');
        }

        // Messaging Center Functionality
        let currentMessageFilter = 'inbox';
        const messageData = {
            1: {
                id: 1,
                type: 'inbox',
                from: 'Dr. Sarah Johnson',
                email: 'sarah.johnson@email.com',
                subject: 'Application Question - Houston Position',
                content: `Hello,

I hope this message finds you well. I have a question regarding the call schedule for the emergency medicine position in Houston that was posted last week.

Could you please provide more details about:
 The typical call frequency (how many nights per month)
 Whether there's backup coverage available
 The process for requesting time off during busy periods

I'm very interested in this position and want to ensure it aligns with my availability and work-life balance preferences.

Thank you for your time and I look forward to hearing from you.

Best regards,
Dr. Sarah Johnson`,
                date: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago
                read: false
            },
            2: {
                id: 2,
                type: 'inbox',
                from: 'Dr. Michael Chen',
                email: 'michael.chen@email.com',
                subject: 'Contract Terms Clarification',
                content: `Hi there,

Could you please clarify the malpractice insurance coverage details for the Los Angeles position? Specifically:

1. Is the coverage provided by the facility or do I need my own?
2. What are the liability limits?
3. Are there any exclusions I should be aware of?

I'd also like to know about the credentialing timeline and what documents will be needed.

Thanks for your assistance.

Dr. Michael Chen`,
                date: new Date(Date.now() - 24 * 60 * 60 * 1000), // 1 day ago
                read: true
            },
            3: {
                id: 3,
                type: 'inbox',
                from: 'Dr. Emily Rodriguez',
                email: 'emily.rodriguez@email.com',
                subject: 'Availability Update',
                content: `Hello,

My availability has changed for the Los Angeles assignment. I can start two weeks earlier than originally planned.

Please let me know if this works better for the facility's needs. I'm flexible and want to accommodate their schedule.

Looking forward to hearing from you.

Best,
Dr. Emily Rodriguez`,
                date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000), // 2 days ago
                read: true
            },
            4: {
                id: 4,
                type: 'inbox',
                from: 'Dr. James Wilson',
                email: 'james.wilson@email.com',
                subject: 'Thank You - Placement Success',
                content: `Dear Team,

Thank you for the excellent placement service. The position has been fantastic and exactly what I was looking for.

The facility is great, the staff is welcoming, and the work-life balance is perfect. I would definitely work with your agency again in the future.

Keep up the great work!

Dr. James Wilson`,
                date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000), // 3 days ago
                read: true
            }
        };

        function filterMessages(filter) {
            currentMessageFilter = filter;
            
            // Update filter button states
            const buttons = document.querySelectorAll('#message-list').parentElement.parentElement.querySelectorAll('.filter-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update message list
            updateMessageList();
            
            // Clear message content if switching filters
            if (filter !== 'inbox') {
                showEmptyMessageState(filter);
            }
        }

        function updateMessageList() {
            const messageList = document.getElementById('message-list');
            
            if (currentMessageFilter === 'inbox') {
                // Show existing inbox messages
                messageList.style.display = 'block';
            } else {
                // Show empty state for other filters
                messageList.innerHTML = `
                    <div style="padding: 2rem; text-align: center; color: var(--text-secondary);">
                        <div style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></div>
                        <div>No ${currentMessageFilter} messages</div>
                    </div>
                `;
            }
        }

        function selectMessage(messageId) {
            // Update active state
            const messageItems = document.querySelectorAll('.message-item');
            messageItems.forEach(item => item.classList.remove('active'));
            document.querySelector(`[data-message-id="${messageId}"]`).classList.add('active');
            
            // Load message content
            const message = messageData[messageId];
            if (message) {
                const contentArea = document.getElementById('selected-message');
                contentArea.innerHTML = `
                    <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">${message.subject}</h3>
                        <div style="display: flex; align-items: center; gap: 1rem; color: var(--text-secondary); font-size: 0.9rem; flex-wrap: wrap;">
                            <span><strong>From:</strong> ${message.from} &lt;${message.email}&gt;</span>
                            <span><strong>Date:</strong> ${formatDate(message.date, 'datetime')}</span>
                        </div>
                    </div>
                    <div style="line-height: 1.6; color: var(--text-primary); margin-bottom: 1.5rem; white-space: pre-line;">
                        ${message.content}
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn primary" onclick="replyToMessage(${messageId})">Reply</button>
                        <button class="btn secondary" onclick="forwardMessage(${messageId})">Forward</button>
                        <button class="btn secondary" onclick="archiveMessage(${messageId})">Archive</button>
                    </div>
                `;
            }
        }

        function showEmptyMessageState(filter) {
            const contentArea = document.getElementById('selected-message');
            contentArea.innerHTML = `
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.3;"></div>
                    <h3 style="margin-bottom: 0.5rem;">No ${filter} messages</h3>
                    <p>Your ${filter} folder is empty.</p>
                </div>
            `;
        }

        function showComposeMessage() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Compose Message</h2>
                        <button onclick="closeComposeModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <form class="compose-form" onsubmit="sendMessage(event)">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">To:</label>
                            <input type="email" id="compose-to" placeholder="recipient@email.com" required>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Subject:</label>
                            <input type="text" id="compose-subject" placeholder="Message subject" required>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Message:</label>
                            <textarea id="compose-message" placeholder="Type your message here..." required></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                            <button type="button" class="btn secondary" onclick="closeComposeModal()">Cancel</button>
                            <button type="submit" class="btn primary">Send Message</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeComposeModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }

        function sendMessage(event) {
            event.preventDefault();
            
            const submitButton = event.target.querySelector('button[type="submit"]');
            setButtonLoading(submitButton, true);
            
            const to = document.getElementById('compose-to').value;
            const subject = document.getElementById('compose-subject').value;
            const message = document.getElementById('compose-message').value;
            
            // Simulate API call with loading state
            setTimeout(() => {
                setButtonLoading(submitButton, false);
                showToast(`Message sent to ${to}`, 'success');
                closeComposeModal();
            }, 1200);
        }

        function replyToMessage(messageId) {
            const message = messageData[messageId];
            if (message) {
                showComposeMessage();
                
                // Pre-fill reply fields
                setTimeout(() => {
                    document.getElementById('compose-to').value = message.email;
                    document.getElementById('compose-subject').value = `Re: ${message.subject}`;
                    document.getElementById('compose-message').value = `\n\n--- Original Message ---\nFrom: ${message.from}\nSubject: ${message.subject}\nDate: ${message.date.toLocaleString()}\n\n${message.content}`;
                }, 100);
            }
        }

        function forwardMessage(messageId) {
            const message = messageData[messageId];
            if (message) {
                showComposeMessage();
                
                // Pre-fill forward fields
                setTimeout(() => {
                    document.getElementById('compose-subject').value = `Fwd: ${message.subject}`;
                    document.getElementById('compose-message').value = `\n\n--- Forwarded Message ---\nFrom: ${message.from}\nSubject: ${message.subject}\nDate: ${message.date.toLocaleString()}\n\n${message.content}`;
                }, 100);
            }
        }

        function archiveMessage(messageId) {
            showNotification(`Message archived`, 'info');
            
            // Remove from message list
            const messageItem = document.querySelector(`[data-message-id="${messageId}"]`);
            if (messageItem) {
                messageItem.remove();
            }
            
            // Show empty state if no messages left
            const remainingMessages = document.querySelectorAll('.message-item');
            if (remainingMessages.length === 0) {
                showEmptyMessageState('inbox');
            }
        }

        // Profile Dropdown Functionality
        function toggleProfileDropdown(event) {
            event.preventDefault();
            event.stopPropagation();
            
            const dropdown = document.getElementById('profile-dropdown-menu');
            dropdown.classList.toggle('show');
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function closeDropdown(e) {
                if (!e.target.closest('.profile-dropdown')) {
                    dropdown.classList.remove('show');
                    document.removeEventListener('click', closeDropdown);
                }
            });
        }

        function showProfileSettings() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Profile Settings</h2>
                        <button onclick="closeProfileModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="display: grid; gap: 1.5rem;">
                        <div style="text-align: center; margin-bottom: 1rem;">
                            <div class="profile-avatar" style="width: 80px; height: 80px; font-size: 2rem; margin: 0 auto 1rem;">SJ</div>
                            <button class="btn secondary" style="font-size: 0.9rem;">Change Photo</button>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">First Name</label>
                                <input type="text" value="Sarah" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Last Name</label>
                                <input type="text" value="Johnson" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email</label>
                            <input type="email" value="sarah.johnson@metrostaff.com" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Job Title</label>
                            <input type="text" value="Senior Healthcare Recruiter" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Company</label>
                            <input type="text" value="Metropolitan Staffing Solutions" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Phone</label>
                            <input type="tel" value="+1 (555) 123-4567" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1rem;">
                            <button class="btn secondary" onclick="closeProfileModal()">Cancel</button>
                            <button class="btn primary" onclick="saveProfileSettings()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showAccountSettings() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Account Settings</h2>
                        <button onclick="closeProfileModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="display: grid; gap: 1.5rem;">
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">Security</h3>
                            <div style="display: grid; gap: 1rem;">
                                <div>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Current Password</label>
                                    <input type="password" placeholder="Enter current password" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">New Password</label>
                                    <input type="password" placeholder="Enter new password" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Confirm New Password</label>
                                    <input type="password" placeholder="Confirm new password" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">Privacy</h3>
                            <div style="display: grid; gap: 0.75rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem;">
                                    <input type="checkbox" checked style="width: auto;">
                                    <span>Allow other recruiters to see my profile</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;">
                                    <input type="checkbox" checked style="width: auto;">
                                    <span>Show my activity status</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;">
                                    <input type="checkbox" style="width: auto;">
                                    <span>Allow contact from external partners</span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1rem;">
                            <button class="btn secondary" onclick="closeProfileModal()">Cancel</button>
                            <button class="btn primary" onclick="saveAccountSettings()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showNotificationSettings() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> Notification Settings</h2>
                        <button onclick="closeProfileModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="display: grid; gap: 2rem;">
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">Email Notifications</h3>
                            <div style="display: grid; gap: 1rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" checked>
                                    <span>New job applications</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" checked>
                                    <span>Client messages</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox">
                                    <span>Weekly performance reports</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" checked>
                                    <span>System updates</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">Mobile Push Notifications</h3>
                            <div style="display: grid; gap: 1rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" checked>
                                    <span>Urgent job matches</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox">
                                    <span>Interview reminders</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" checked>
                                    <span>Payment notifications</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">Communication Preferences</h3>
                            <div style="display: grid; gap: 1rem;">
                                <div>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Frequency</label>
                                    <select style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                        <option>Immediate</option>
                                        <option selected>Daily digest</option>
                                        <option>Weekly summary</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Preferred Contact Time</label>
                                    <select style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                        <option>9:00 AM - 12:00 PM</option>
                                        <option selected>12:00 PM - 5:00 PM</option>
                                        <option>5:00 PM - 8:00 PM</option>
                                        <option>Any time</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <button class="btn secondary" onclick="closeProfileModal()">Cancel</button>
                            <button class="btn primary" onclick="saveNotificationSettings()">Save Settings</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function saveNotificationSettings() {
            showNotification('Notification settings saved successfully!', 'success');
            closeProfileModal();
        }

        function showHelpCenter() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> Help Center</h2>
                        <button onclick="closeProfileModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <!-- Search Box -->
                    <div style="margin-bottom: 2rem;">
                        <input type="text" placeholder="Search for help topics..." style="
                            width: 100%;
                            padding: 1rem;
                            border: 1px solid var(--border-color);
                            border-radius: 0.5rem;
                            font-size: 1rem;
                        ">
                    </div>
                    
                    <!-- Help Categories -->
                    <div style="display: grid; gap: 1.5rem;">
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);"> Getting Started</h3>
                            <div style="display: grid; gap: 0.5rem;">
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Setting up your recruiter profile</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Posting your first job</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Understanding the dashboard</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Managing applicants</a>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);"> Job Management</h3>
                            <div style="display: grid; gap: 0.5rem;">
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Creating effective job postings</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Setting competitive rates</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Managing job status</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Bulk job operations</a>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);"> Candidate Management</h3>
                            <div style="display: grid; gap: 0.5rem;">
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Reviewing applications</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Scheduling interviews</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Communicating with candidates</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Making offers</a>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="margin-bottom: 1rem; color: var(--text-primary);"> Analytics & Reports</h3>
                            <div style="display: grid; gap: 0.5rem;">
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Understanding performance metrics</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Generating reports</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Tracking placements</a>
                                <a href="#" style="color: var(--primary-color); text-decoration: none; padding: 0.5rem 0; border-bottom: 1px solid var(--border-light);">Revenue analytics</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contact Support -->
                    <div style="margin-top: 2rem; padding: 1.5rem; background: var(--background-color); border-radius: 0.5rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Still need help?</h4>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn primary"> Email Support</button>
                            <button class="btn secondary"> Live Chat</button>
                            <button class="btn secondary"> Schedule Call</button>
                        </div>
                        <p style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                            Our support team typically responds within 2-4 hours during business hours (9 AM - 6 PM EST).
                        </p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeProfileModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }

        function saveProfileSettings() {
            showNotification('Profile updated successfully', 'success');
            closeProfileModal();
        }

        function saveAccountSettings() {
            showNotification('Account settings updated successfully', 'success');
            closeProfileModal();
        }

        function logout() {
            if (confirm('Are you sure you want to sign out?')) {
                showNotification('Signing out...', 'info');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1000);
            }
        }

        // Dynamic KPI Stats System
        function updateDashboardStats() {
            // Count jobs by status
            const allJobs = document.querySelectorAll('#jobs-table-body tr');
            const activeJobs = document.querySelectorAll('#jobs-table-body tr[data-status="active"]');
            const pendingJobs = document.querySelectorAll('#jobs-table-body tr[data-status="pending"]');
            const filledJobs = document.querySelectorAll('#jobs-table-body tr[data-status="filled"]');
            
            // Count total applicants
            let totalApplicants = 0;
            allJobs.forEach(row => {
                const applicantCell = row.cells[4]; // Applicants column
                if (applicantCell) {
                    const applicantCount = parseInt(applicantCell.getAttribute('data-sort-value') || '0');
                    totalApplicants += applicantCount;
                }
            });
            
            // Update stat cards
            const statCards = document.querySelectorAll('.stat-card');
            if (statCards[0]) {
                statCards[0].querySelector('.stat-value').textContent = activeJobs.length;
                statCards[0].querySelector('.stat-label').textContent = 'Active Job Listings';
            }
            if (statCards[1]) {
                statCards[1].querySelector('.stat-value').textContent = totalApplicants;
                statCards[1].querySelector('.stat-label').textContent = 'Total Applicants';
            }
            if (statCards[2]) {
                statCards[2].querySelector('.stat-value').textContent = filledJobs.length;
                statCards[2].querySelector('.stat-label').textContent = 'Positions Filled';
            }
            
            // Calculate and update satisfaction rate based on filled positions
            const satisfactionRate = allJobs.length > 0 ? Math.round((filledJobs.length / allJobs.length) * 100) : 0;
            if (statCards[3]) {
                statCards[3].querySelector('.stat-value').textContent = satisfactionRate + '%';
                statCards[3].querySelector('.stat-label').textContent = 'Success Rate';
            }
        }

        // Add refresh functionality to KPI stats
        function addKPIRefreshControls() {
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid) {
                // Add refresh button container
                const refreshContainer = document.createElement('div');
                refreshContainer.style.cssText = `
                    position: absolute;
                    top: 1rem;
                    right: 1rem;
                    display: flex;
                    gap: 0.5rem;
                    align-items: center;
                `;
                
                // Add refresh button
                const refreshBtn = document.createElement('button');
                refreshBtn.className = 'btn-small secondary';
                refreshBtn.innerHTML = '';
                refreshBtn.title = 'Refresh KPI Data';
                refreshBtn.onclick = refreshKPIData;
                
                // Add date range for KPIs
                const dateRange = document.createElement('select');
                dateRange.style.cssText = `
                    padding: 0.25rem 0.5rem;
                    border: 1px solid var(--border-color);
                    border-radius: 0.25rem;
                    font-size: 0.8rem;
                    background: white;
                `;
                dateRange.innerHTML = `
                    <option value="week">This Week</option>
                    <option value="month" selected>This Month</option>
                    <option value="quarter">This Quarter</option>
                    <option value="year">This Year</option>
                `;
                dateRange.onchange = (e) => filterKPIByDate(e.target.value);
                
                refreshContainer.appendChild(dateRange);
                refreshContainer.appendChild(refreshBtn);
                
                // Make stats grid relative positioned
                statsGrid.style.position = 'relative';
                statsGrid.appendChild(refreshContainer);
            }
        }

        function refreshKPIData() {
            showLoadingState('.stats-grid', 'Refreshing KPI data...');
            
            setTimeout(() => {
                updateDashboardStats();
                hideLoadingState('.stats-grid');
                showNotification('KPI data refreshed', 'success');
            }, 1000);
        }

        function filterKPIByDate(period) {
            showLoadingState('.stats-grid', `Loading ${period} data...`);
            
            setTimeout(() => {
                // Simulate different data for different periods
                const multipliers = {
                    week: 0.3,
                    month: 1,
                    quarter: 2.8,
                    year: 12
                };
                
                const multiplier = multipliers[period] || 1;
                const baseActiveJobs = document.querySelectorAll('#jobs-table-body tr[data-status="active"]').length;
                const baseApplicants = 156; // Original total
                const baseFilled = document.querySelectorAll('#jobs-table-body tr[data-status="filled"]').length;
                
                const statCards = document.querySelectorAll('.stat-card');
                if (statCards[0]) {
                    statCards[0].querySelector('.stat-value').textContent = Math.round(baseActiveJobs * multiplier);
                }
                if (statCards[1]) {
                    statCards[1].querySelector('.stat-value').textContent = Math.round(baseApplicants * multiplier);
                }
                if (statCards[2]) {
                    statCards[2].querySelector('.stat-value').textContent = Math.round(baseFilled * multiplier);
                }
                
                hideLoadingState('.stats-grid');
                showNotification(`KPI updated for ${period}`, 'info');
            }, 800);
        }

        // Loading States System
        function showLoadingState(containerId, message = 'Loading...') {
            const container = document.getElementById(containerId) || document.querySelector(containerId);
            if (!container) return;
            
            // Remove existing loading overlay
            const existingOverlay = container.querySelector('.loading-overlay');
            if (existingOverlay) {
                existingOverlay.remove();
            }
            
            // Add loading overlay
            const loadingOverlay = document.createElement('div');
            loadingOverlay.className = 'loading-overlay';
            loadingOverlay.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
                    <div class="loading-spinner"></div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">${message}</div>
                </div>
            `;
            
            // Position container relative if not already
            const currentPosition = window.getComputedStyle(container).position;
            if (currentPosition === 'static') {
                container.style.position = 'relative';
            }
            
            container.appendChild(loadingOverlay);
        }

        function hideLoadingState(containerId) {
            const container = document.getElementById(containerId) || document.querySelector(containerId);
            if (!container) return;
            
            const loadingOverlay = container.querySelector('.loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.remove();
            }
        }

        function showTableLoading() {
            showLoadingState('jobs-table-body', 'Loading job data...');
        }

        function hideTableLoading() {
            hideLoadingState('jobs-table-body');
        }

        function showApplicantsLoading() {
            showLoadingState('.dashboard-section:nth-of-type(2)', 'Loading applicant data...');
        }

        function hideApplicantsLoading() {
            hideLoadingState('.dashboard-section:nth-of-type(2)');
        }

        function showChartLoading() {
            showLoadingState('.chart-container', 'Loading analytics data...');
        }

        function hideChartLoading() {
            hideLoadingState('.chart-container');
        }

        function showMessagesLoading() {
            showLoadingState('#message-list', 'Loading messages...');
        }

        function hideMessagesLoading() {
            hideLoadingState('#message-list');
        }

        function refreshDashboardData() {
            // Show loading states for all sections
            showTableLoading();
            showApplicantsLoading();
            showChartLoading();
            showMessagesLoading();
            
            showNotification('Refreshing dashboard data...', 'info');
            
            // Simulate data loading with different timing for each section
            setTimeout(() => {
                hideTableLoading();
                showNotification('Jobs data updated', 'success');
            }, 1500);
            
            setTimeout(() => {
                hideApplicantsLoading();
                showNotification('Applicants data updated', 'success');
            }, 2000);
            
            setTimeout(() => {
                hideChartLoading();
                drawPerformanceChart('month'); // Redraw chart
                showNotification('Analytics data updated', 'success');
            }, 2500);
            
            setTimeout(() => {
                hideMessagesLoading();
                showNotification('Messages updated', 'success');
            }, 1800);
        }

        // Enhanced existing functions with loading states
        function filterJobsWithLoading(filter) {
            showTableLoading();
            
            setTimeout(() => {
                filterJobs(filter);
                hideTableLoading();
            }, 800);
        }

        function sortTableWithLoading(columnIndex) {
            showTableLoading();
            
            setTimeout(() => {
                sortTable(columnIndex);
                hideTableLoading();
            }, 600);
        }

        function changeTimeframeWithLoading(period) {
            showChartLoading();
            
            setTimeout(() => {
                changeTimeframe(period);
                hideChartLoading();
            }, 1000);
        }

        function applyCustomDateRangeWithLoading() {
            showChartLoading();
            
            setTimeout(() => {
                applyCustomDateRange();
                hideChartLoading();
            }, 1200);
        }

        // Add loading state to message filtering
        function filterMessagesWithLoading(filter) {
            showMessagesLoading();
            
            setTimeout(() => {
                filterMessages(filter);
                hideMessagesLoading();
            }, 500);
        }

        // Add global refresh functionality
        function addRefreshButton() {
            const headerActions = document.querySelector('.header-actions');
            if (headerActions) {
                const refreshBtn = document.createElement('button');
                refreshBtn.className = 'btn secondary';
                refreshBtn.innerHTML = ' Refresh Data';
                refreshBtn.onclick = refreshDashboardData;
                headerActions.appendChild(refreshBtn);
            }
        }

        // Initialize loading states on page interactions
        function initializeLoadingStates() {
            // Add loading to existing buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                const originalOnclick = btn.onclick;
                btn.onclick = function(e) {
                    if (btn.textContent.includes('Inbox') || btn.textContent.includes('Sent') || btn.textContent.includes('Drafts')) {
                        showMessagesLoading();
                        setTimeout(() => {
                            if (originalOnclick) originalOnclick.call(this, e);
                            hideMessagesLoading();
                        }, 500);
                    } else {
                        showTableLoading();
                        setTimeout(() => {
                            if (originalOnclick) originalOnclick.call(this, e);
                            hideTableLoading();
                        }, 800);
                    }
                };
            });

            // Add loading to sort headers
            const sortHeaders = document.querySelectorAll('.jobs-table th[onclick]');
            sortHeaders.forEach(header => {
                const originalOnclick = header.onclick;
                header.onclick = function(e) {
                    showTableLoading();
                    setTimeout(() => {
                        if (originalOnclick) originalOnclick.call(this, e);
                        hideTableLoading();
                    }, 600);
                };
            });

            // Add loading to analytics timeframe buttons
            const timeframeButtons = document.querySelectorAll('.section-actions button[onclick*="changeTimeframe"]');
            timeframeButtons.forEach(btn => {
                const originalOnclick = btn.onclick;
                btn.onclick = function(e) {
                    showChartLoading();
                    setTimeout(() => {
                        if (originalOnclick) originalOnclick.call(this, e);
                        hideChartLoading();
                    }, 1000);
                };
            });

            // Add refresh button to header
            addRefreshButton();
        }
        
        // Performance Chart System
        function drawPerformanceChart(timeframe = 'month', customOptions = null) {
            const canvas = document.getElementById('performance-chart');
            if (!canvas) {
                console.error('Performance chart canvas not found');
                return;
            }
            
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                console.error('Could not get 2D context for performance chart');
                return;
            }
            
            // Set canvas size based on container
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            canvas.width = Math.max(rect.width || 800, 400);
            canvas.height = Math.max(rect.height || 300, 250);
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Chart data based on timeframe
            const chartData = getChartData(timeframe, customOptions);
            
            // Chart dimensions
            const padding = 60;
            const chartWidth = canvas.width - 2 * padding;
            const chartHeight = canvas.height - 2 * padding;
            const startX = padding;
            const startY = padding;
            
            // Make canvas visible and remove any loading states
            canvas.style.display = 'block';
            canvas.style.visibility = 'visible';
            canvas.style.opacity = '1';
            
            // Draw background
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw border to ensure canvas is visible
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            ctx.strokeRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            drawGrid(ctx, startX, startY, chartWidth, chartHeight);
            
            // Draw axes
            drawAxes(ctx, startX, startY, chartWidth, chartHeight, chartData);
            
            // Draw data lines
            drawDataLines(ctx, startX, startY, chartWidth, chartHeight, chartData);
            
            // Draw legend
            drawLegend(ctx, canvas.width - 150, 20);
        }
        
        function getChartData(timeframe, customOptions = null) {
            // Handle custom date range
            if (customOptions && customOptions.customRange) {
                return generateCustomRangeData(customOptions.startDate, customOptions.endDate, timeframe);
            }
            
            const datasets = {
                week: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    views: [120, 135, 158, 142, 167, 89, 95],
                    applications: [12, 18, 22, 19, 25, 8, 11],
                    conversions: [2, 3, 4, 3, 5, 1, 2]
                },
                month: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    views: [890, 1120, 1347, 986],
                    applications: [89, 134, 156, 98],
                    conversions: [15, 22, 28, 18]
                },
                quarter: {
                    labels: ['Month 1', 'Month 2', 'Month 3'],
                    views: [4343, 5234, 4987],
                    applications: [477, 592, 518],
                    conversions: [83, 104, 89]
                }
            };
            
            return datasets[timeframe] || datasets.month;
        }

        function generateCustomRangeData(startDate, endDate, granularity) {
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            // Generate labels and mock data based on date range
            let labels = [];
            let viewsData = [];
            let applicationsData = [];
            let conversionsData = [];
            
            if (granularity === 'week' && diffDays <= 14) {
                // Daily data for short ranges
                for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
                    labels.push(d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }));
                    viewsData.push(Math.floor(Math.random() * 100) + 80);
                    applicationsData.push(Math.floor(Math.random() * 15) + 5);
                    conversionsData.push(Math.floor(Math.random() * 4) + 1);
                }
            } else if (granularity === 'month' && diffDays <= 93) {
                // Weekly data for medium ranges
                const weeks = Math.ceil(diffDays / 7);
                for (let i = 1; i <= weeks; i++) {
                    labels.push(`Week ${i}`);
                    viewsData.push(Math.floor(Math.random() * 500) + 800);
                    applicationsData.push(Math.floor(Math.random() * 50) + 70);
                    conversionsData.push(Math.floor(Math.random() * 10) + 12);
                }
            } else {
                // Monthly data for long ranges
                const months = Math.ceil(diffDays / 30);
                for (let i = 1; i <= months; i++) {
                    labels.push(`Month ${i}`);
                    viewsData.push(Math.floor(Math.random() * 1500) + 3500);
                    applicationsData.push(Math.floor(Math.random() * 200) + 400);
                    conversionsData.push(Math.floor(Math.random() * 30) + 60);
                }
            }
            
            return {
                labels: labels,
                views: viewsData,
                applications: applicationsData,
                conversions: conversionsData
            };
        }
        
        function drawGrid(ctx, startX, startY, width, height) {
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            
            // Horizontal grid lines
            for (let i = 0; i <= 5; i++) {
                const y = startY + (height / 5) * i;
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(startX + width, y);
                ctx.stroke();
            }
            
            // Vertical grid lines
            for (let i = 0; i <= 4; i++) {
                const x = startX + (width / 4) * i;
                ctx.beginPath();
                ctx.moveTo(x, startY);
                ctx.lineTo(x, startY + height);
                ctx.stroke();
            }
        }
        
        function drawAxes(ctx, startX, startY, width, height, data) {
            ctx.strokeStyle = '#64748b';
            ctx.lineWidth = 2;
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX, startY + height);
            ctx.stroke();
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(startX, startY + height);
            ctx.lineTo(startX + width, startY + height);
            ctx.stroke();
            
            // Y-axis labels
            ctx.fillStyle = '#64748b';
            ctx.font = '12px Arial';
            ctx.textAlign = 'right';
            const maxValue = Math.max(...data.views);
            for (let i = 0; i <= 5; i++) {
                const value = Math.round((maxValue / 5) * (5 - i));
                const y = startY + (height / 5) * i + 4;
                ctx.fillText(value.toString(), startX - 10, y);
            }
            
            // X-axis labels
            ctx.textAlign = 'center';
            data.labels.forEach((label, index) => {
                const x = startX + (width / (data.labels.length - 1)) * index;
                ctx.fillText(label, x, startY + height + 20);
            });
        }
        
        function drawDataLines(ctx, startX, startY, width, height, data) {
            const colors = ['#2563eb', '#10b981', '#f59e0b'];
            const datasets = [data.views, data.applications, data.conversions];
            const labels = ['Views', 'Applications', 'Conversions'];
            
            datasets.forEach((dataset, datasetIndex) => {
                const maxValue = Math.max(...data.views); // Use views as the scale
                ctx.strokeStyle = colors[datasetIndex];
                ctx.lineWidth = 3;
                
                ctx.beginPath();
                dataset.forEach((value, index) => {
                    const x = startX + (width / (dataset.length - 1)) * index;
                    const y = startY + height - (value / maxValue) * height;
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                ctx.stroke();
                
                // Draw data points
                ctx.fillStyle = colors[datasetIndex];
                dataset.forEach((value, index) => {
                    const x = startX + (width / (dataset.length - 1)) * index;
                    const y = startY + height - (value / maxValue) * height;
                    
                    ctx.beginPath();
                    ctx.arc(x, y, 4, 0, 2 * Math.PI);
                    ctx.fill();
                });
            });
        }
        
        function drawLegend(ctx, x, y) {
            const colors = ['#2563eb', '#10b981', '#f59e0b'];
            const labels = ['Views', 'Applications', 'Conversions'];
            
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            
            labels.forEach((label, index) => {
                const legendY = y + index * 20;
                
                // Draw color box
                ctx.fillStyle = colors[index];
                ctx.fillRect(x, legendY - 6, 12, 12);
                
                // Draw label
                ctx.fillStyle = '#1e293b';
                ctx.fillText(label, x + 20, legendY + 4);
            });
        }

        // Chart timeframe control functions
        function changeTimeframe(timeframe) {
            drawPerformanceChart(timeframe);
        }

        function applyCustomDateRange() {
            const startDate = document.getElementById('analytics-start-date').value;
            const endDate = document.getElementById('analytics-end-date').value;
            
            if (!startDate || !endDate) {
                alert('Please select both start and end dates');
                return;
            }
            
            if (new Date(startDate) > new Date(endDate)) {
                alert('Start date must be before end date');
                return;
            }
            
            const customOptions = {
                customRange: true,
                startDate: startDate,
                endDate: endDate
            };
            
            // Determine granularity based on date range
            const diffTime = Math.abs(new Date(endDate) - new Date(startDate));
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            let timeframe = 'month';
            if (diffDays <= 14) {
                timeframe = 'week';
            } else if (diffDays > 93) {
                timeframe = 'quarter';
            }
            
            drawPerformanceChart(timeframe, customOptions);
        }

        // Pagination system
        let jobsPagination = {
            currentPage: 1,
            itemsPerPage: 25,
            totalItems: 0,
            filteredItems: []
        };

        let applicantsPagination = {
            currentPage: 1,
            itemsPerPage: 6,
            totalItems: 0,
            filteredItems: []
        };

        function initializePagination() {
            updateJobsPagination();
            updateApplicantsPagination();
        }

        function updateJobsPagination() {
            const rows = Array.from(document.querySelectorAll('#jobs-table-body tr'));
            // Include all rows initially, not just visible ones
            const visibleRows = rows.filter(row => row.style.display !== 'none' && row.style.display !== '');
            // If no explicit styling, treat as visible
            const allRows = rows.filter(row => !row.style.display || row.style.display === '' || row.style.display !== 'none');
            
            jobsPagination.filteredItems = allRows.length > 0 ? allRows : rows;
            jobsPagination.totalItems = jobsPagination.filteredItems.length;
            
            displayJobsPage();
            updateJobsPaginationControls();
        }

        function displayJobsPage() {
            const startIndex = (jobsPagination.currentPage - 1) * jobsPagination.itemsPerPage;
            const endIndex = startIndex + jobsPagination.itemsPerPage;
            
            jobsPagination.filteredItems.forEach((row, index) => {
                if (index >= startIndex && index < endIndex) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function updateJobsPaginationControls() {
            const totalPages = Math.ceil(jobsPagination.totalItems / jobsPagination.itemsPerPage);
            const startItem = (jobsPagination.currentPage - 1) * jobsPagination.itemsPerPage + 1;
            const endItem = Math.min(jobsPagination.currentPage * jobsPagination.itemsPerPage, jobsPagination.totalItems);
            
            // Update info text
            document.getElementById('jobs-pagination-info').textContent = 
                `Showing ${startItem}-${endItem} of ${jobsPagination.totalItems} jobs`;
            
            // Update navigation buttons
            const prevBtn = document.getElementById('jobs-prev-btn');
            const nextBtn = document.getElementById('jobs-next-btn');
            
            prevBtn.disabled = jobsPagination.currentPage <= 1;
            nextBtn.disabled = jobsPagination.currentPage >= totalPages;
            
            // Update page numbers
            const pageNumbers = document.getElementById('jobs-page-numbers');
            pageNumbers.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('span');
                pageBtn.className = `page-number ${i === jobsPagination.currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => goToJobsPage(i);
                pageNumbers.appendChild(pageBtn);
            }
        }

        function changeJobsPage(direction) {
            const totalPages = Math.ceil(jobsPagination.totalItems / jobsPagination.itemsPerPage);
            const newPage = jobsPagination.currentPage + direction;
            
            if (newPage >= 1 && newPage <= totalPages) {
                jobsPagination.currentPage = newPage;
                displayJobsPage();
                updateJobsPaginationControls();
            }
        }

        function goToJobsPage(page) {
            jobsPagination.currentPage = page;
            displayJobsPage();
            updateJobsPaginationControls();
        }

        function updateApplicantsPagination() {
            const cards = Array.from(document.querySelectorAll('.applicant-card'));
            
            applicantsPagination.filteredItems = cards;
            applicantsPagination.totalItems = cards.length;
            
            displayApplicantsPage();
            updateApplicantsPaginationControls();
        }

        function displayApplicantsPage() {
            const startIndex = (applicantsPagination.currentPage - 1) * applicantsPagination.itemsPerPage;
            const endIndex = startIndex + applicantsPagination.itemsPerPage;
            
            applicantsPagination.filteredItems.forEach((card, index) => {
                if (index >= startIndex && index < endIndex) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function updateApplicantsPaginationControls() {
            const totalPages = Math.ceil(applicantsPagination.totalItems / applicantsPagination.itemsPerPage);
            const startItem = (applicantsPagination.currentPage - 1) * applicantsPagination.itemsPerPage + 1;
            const endItem = Math.min(applicantsPagination.currentPage * applicantsPagination.itemsPerPage, applicantsPagination.totalItems);
            
            // Update info text
            document.getElementById('applicants-pagination-info').textContent = 
                `Showing ${startItem}-${endItem} of ${applicantsPagination.totalItems} applicants`;
            
            // Update navigation buttons
            const prevBtn = document.getElementById('applicants-prev-btn');
            const nextBtn = document.getElementById('applicants-next-btn');
            
            prevBtn.disabled = applicantsPagination.currentPage <= 1;
            nextBtn.disabled = applicantsPagination.currentPage >= totalPages;
            
            // Update page numbers
            const pageNumbers = document.getElementById('applicants-page-numbers');
            pageNumbers.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('span');
                pageBtn.className = `page-number ${i === applicantsPagination.currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => goToApplicantsPage(i);
                pageNumbers.appendChild(pageBtn);
            }
        }

        function changeApplicantsPage(direction) {
            const totalPages = Math.ceil(applicantsPagination.totalItems / applicantsPagination.itemsPerPage);
            const newPage = applicantsPagination.currentPage + direction;
            
            if (newPage >= 1 && newPage <= totalPages) {
                applicantsPagination.currentPage = newPage;
                displayApplicantsPage();
                updateApplicantsPaginationControls();
            }
        }

        function goToApplicantsPage(page) {
            applicantsPagination.currentPage = page;
            displayApplicantsPage();
            updateApplicantsPaginationControls();
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 0.5rem;
                color: white;
                font-weight: 500;
                z-index: 10001;
                opacity: 0;
                transition: opacity 0.3s ease;
                max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            `;
            
            if (type === 'success') {
                notification.style.background = '#10b981';
            } else if (type === 'error') {
                notification.style.background = '#ef4444';
            } else {
                notification.style.background = '#2563eb';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Fade in
            setTimeout(() => notification.style.opacity = '1', 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // Date Formatting Utilities
        function formatDate(date, format = 'short') {
            const dateObj = date instanceof Date ? date : new Date(date);
            
            switch (format) {
                case 'short':
                    // Standard format: "Jan 10, 2025"
                    return dateObj.toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric', 
                        year: 'numeric' 
                    });
                case 'long':
                    // Long format: "January 10, 2025"
                    return dateObj.toLocaleDateString('en-US', { 
                        month: 'long', 
                        day: 'numeric', 
                        year: 'numeric' 
                    });
                case 'compact':
                    // Compact format: "1/10/25"
                    return dateObj.toLocaleDateString('en-US', { 
                        month: 'numeric', 
                        day: 'numeric', 
                        year: '2-digit' 
                    });
                case 'iso':
                    // ISO format for file names: "2025-01-10"
                    return dateObj.toISOString().split('T')[0];
                case 'relative':
                    // Relative time: "2 hours ago", "1 day ago"
                    return formatRelativeTime(dateObj);
                case 'datetime':
                    // Full datetime: "Jan 10, 2025 at 2:30 PM"
                    return dateObj.toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric', 
                        year: 'numeric' 
                    }) + ' at ' + dateObj.toLocaleTimeString('en-US', { 
                        hour: 'numeric', 
                        minute: '2-digit',
                        hour12: true 
                    });
                default:
                    return formatDate(dateObj, 'short');
            }
        }

        function formatRelativeTime(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffSeconds = Math.floor(diffMs / 1000);
            const diffMinutes = Math.floor(diffSeconds / 60);
            const diffHours = Math.floor(diffMinutes / 60);
            const diffDays = Math.floor(diffHours / 24);

            if (diffSeconds < 60) {
                return 'Just now';
            } else if (diffMinutes < 60) {
                return `${diffMinutes} minute${diffMinutes !== 1 ? 's' : ''} ago`;
            } else if (diffHours < 24) {
                return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
            } else if (diffDays < 7) {
                return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
            } else {
                return formatDate(date, 'short');
            }
        }

        // Quick Actions Functionality
        function toggleQuickActions() {
            const grid = document.getElementById('quick-actions-grid');
            const button = document.getElementById('toggle-quick-actions');
            
            if (grid.style.display === 'none') {
                grid.style.display = 'grid';
                button.textContent = 'Hide';
            } else {
                grid.style.display = 'none';
                button.textContent = 'Show';
            }
        }

        function exportAllData() {
            showNotification('Preparing comprehensive data export...', 'info');
            
            setTimeout(() => {
                // Create comprehensive CSV data
                const csvContent = `LocumTrueRate Comprehensive Data Export - ${formatDate(new Date())}\n\n` +
                    `JOBS DATA:\n` +
                    `Position,Facility,Location,Rate,Applicants,Posted,Status\n` +
                    `Emergency Medicine Physician,Metropolitan General,Los Angeles CA,$350/hr,12,Jan 10 2025,Active\n` +
                    `Internal Medicine Hospitalist,City Medical Center,Houston TX,$285/hr,8,Jan 8 2025,Active\n` +
                    `Anesthesiologist,Sunshine Surgery Center,Miami FL,$425/hr,15,Jan 12 2025,Pending\n` +
                    `General Surgeon,Prairie Regional Medical,Chicago IL,$380/hr,6,Jan 5 2025,Filled\n\n` +
                    `APPLICANTS DATA:\n` +
                    `Name,Specialty,Experience,Applied To,Status,Rating\n` +
                    `Dr. Michael Rodriguez,Emergency Medicine,8 years,EM Physician - LA,Applied,4.9\n` +
                    `Dr. Sarah Kim,Internal Medicine,12 years,Hospitalist - Houston,Reviewed,4.8\n` +
                    `Dr. Amanda Patel,Anesthesiology,15 years,Anesthesiologist - Miami,Interviewed,4.7\n` +
                    `Dr. James Wilson,Cardiology,10 years,Cardiologist - Seattle,Offered,4.9\n\n` +
                    `PERFORMANCE METRICS:\n` +
                    `Active Jobs,${document.querySelectorAll('#jobs-table-body tr[data-status="active"]').length}\n` +
                    `Total Applicants,156\n` +
                    `Positions Filled,8\n` +
                    `Client Satisfaction,92%\n` +
                    `Revenue Generated,$487k`;
                
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                
                if (link.download !== undefined) {
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', `locumtruerate_export_${formatDate(new Date(), 'iso')}.csv`);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    showNotification('Comprehensive data exported successfully!', 'success');
                } else {
                    showNotification('Export not supported in this browser', 'error');
                }
            }, 2000);
        }

        function scheduleInterviewBatch() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> Batch Interview Scheduling</h2>
                        <button onclick="closeQuickActionModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="display: grid; gap: 1.5rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Select Time Slots</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <input type="date" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                <input type="time" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Interview Type</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                <option>Video Interview</option>
                                <option>Phone Interview</option>
                                <option>In-Person Interview</option>
                            </select>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Duration</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                <option>30 minutes</option>
                                <option selected>45 minutes</option>
                                <option>60 minutes</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                            <button class="btn secondary" onclick="closeQuickActionModal()">Cancel</button>
                            <button class="btn primary" onclick="processBatchScheduling()">Schedule Interviews</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showMarketRates() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 800px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> Market Rate Analysis</h2>
                        <button onclick="closeQuickActionModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin-bottom: 1rem;">Current Market Rates by Specialty</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead style="background: var(--background-color);">
                                <tr>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Specialty</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Avg Rate</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Range</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Trend</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">Emergency Medicine</td>
                                    <td style="padding: 0.75rem; font-weight: 600;">$350/hr</td>
                                    <td style="padding: 0.75rem;">$320-$390/hr</td>
                                    <td style="padding: 0.75rem; color: var(--success-color);"> +8%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">Anesthesiology</td>
                                    <td style="padding: 0.75rem; font-weight: 600;">$425/hr</td>
                                    <td style="padding: 0.75rem;">$390-$460/hr</td>
                                    <td style="padding: 0.75rem; color: var(--success-color);"> +12%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">Internal Medicine</td>
                                    <td style="padding: 0.75rem; font-weight: 600;">$285/hr</td>
                                    <td style="padding: 0.75rem;">$260-$310/hr</td>
                                    <td style="padding: 0.75rem; color: var(--success-color);"> +5%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">General Surgery</td>
                                    <td style="padding: 0.75rem; font-weight: 600;">$380/hr</td>
                                    <td style="padding: 0.75rem;">$350-$420/hr</td>
                                    <td style="padding: 0.75rem; color: var(--warning-color);"> +2%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem;">Cardiology</td>
                                    <td style="padding: 0.75rem; font-weight: 600;">$395/hr</td>
                                    <td style="padding: 0.75rem;">$370-$425/hr</td>
                                    <td style="padding: 0.75rem; color: var(--success-color);"> +10%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="background: var(--background-color); padding: 1.5rem; border-radius: 0.5rem;">
                        <h4 style="margin-bottom: 1rem;"> Rate Optimization Tips</h4>
                        <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary);">
                            <li>Consider offering 5-10% above market average for urgent placements</li>
                            <li>Emergency Medicine rates are trending upward - adjust accordingly</li>
                            <li>Weekend and holiday rates typically command 20-30% premium</li>
                            <li>Review rates monthly to stay competitive</li>
                        </ul>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showClientPortal() {
            showNotification('Redirecting to Client Portal...', 'info');
            setTimeout(() => {
                showNotification('Client Portal feature coming soon!', 'info');
            }, 1500);
        }

        function showAllApplicantsModal() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 900px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> All Applicants</h2>
                        <button onclick="closeQuickActionModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <select style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                <option>All Statuses</option>
                                <option>New Applicants</option>
                                <option>Under Review</option>
                                <option>Interview Scheduled</option>
                                <option>Rejected</option>
                            </select>
                            <select style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                <option>All Specialties</option>
                                <option>Emergency Medicine</option>
                                <option>Anesthesiology</option>
                                <option>Internal Medicine</option>
                                <option>General Surgery</option>
                                <option>Cardiology</option>
                            </select>
                            <input type="text" placeholder="Search applicants..." style="
                                flex: 1;
                                min-width: 200px;
                                padding: 0.5rem 1rem;
                                border: 1px solid var(--border-color);
                                border-radius: 0.5rem;
                            ">
                        </div>
                    </div>
                    
                    <div style="max-height: 500px; overflow-y: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead style="background: var(--background-color); position: sticky; top: 0;">
                                <tr>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">
                                        <input type="checkbox" style="cursor: pointer;">
                                    </th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Name</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Position</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Experience</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Status</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Applied</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-color);">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">
                                        <input type="checkbox" style="cursor: pointer;">
                                    </td>
                                    <td style="padding: 0.75rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--primary-color); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">JD</div>
                                            <span style="font-weight: 500;">Dr. John Doe</span>
                                        </div>
                                    </td>
                                    <td style="padding: 0.75rem;">Emergency Medicine</td>
                                    <td style="padding: 0.75rem;">15 years</td>
                                    <td style="padding: 0.75rem;">
                                        <span style="padding: 0.25rem 0.75rem; background: #e3f2fd; color: #1976d2; border-radius: 1rem; font-size: 0.875rem;">Under Review</span>
                                    </td>
                                    <td style="padding: 0.75rem;">2 days ago</td>
                                    <td style="padding: 0.75rem;">
                                        <button class="btn-small primary" style="margin-right: 0.5rem;">View</button>
                                        <button class="btn-small secondary">Contact</button>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">
                                        <input type="checkbox" style="cursor: pointer;">
                                    </td>
                                    <td style="padding: 0.75rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--success-color); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">SM</div>
                                            <span style="font-weight: 500;">Dr. Sarah Miller</span>
                                        </div>
                                    </td>
                                    <td style="padding: 0.75rem;">Anesthesiology</td>
                                    <td style="padding: 0.75rem;">12 years</td>
                                    <td style="padding: 0.75rem;">
                                        <span style="padding: 0.25rem 0.75rem; background: #e8f5e9; color: #388e3c; border-radius: 1rem; font-size: 0.875rem;">Interview Scheduled</span>
                                    </td>
                                    <td style="padding: 0.75rem;">3 days ago</td>
                                    <td style="padding: 0.75rem;">
                                        <button class="btn-small primary" style="margin-right: 0.5rem;">View</button>
                                        <button class="btn-small secondary">Contact</button>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border-light);">
                                    <td style="padding: 0.75rem;">
                                        <input type="checkbox" style="cursor: pointer;">
                                    </td>
                                    <td style="padding: 0.75rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--warning-color); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">RJ</div>
                                            <span style="font-weight: 500;">Dr. Robert Johnson</span>
                                        </div>
                                    </td>
                                    <td style="padding: 0.75rem;">Cardiology</td>
                                    <td style="padding: 0.75rem;">20 years</td>
                                    <td style="padding: 0.75rem;">
                                        <span style="padding: 0.25rem 0.75rem; background: #fff3e0; color: #f57c00; border-radius: 1rem; font-size: 0.875rem;">New</span>
                                    </td>
                                    <td style="padding: 0.75rem;">Today</td>
                                    <td style="padding: 0.75rem;">
                                        <button class="btn-small primary" style="margin-right: 0.5rem;">View</button>
                                        <button class="btn-small secondary">Contact</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn secondary" onclick="exportApplicantsList()">Export List</button>
                            <button class="btn secondary" onclick="sendBulkMessage()">Bulk Message</button>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <span style="color: var(--text-secondary);">Showing 3 of 156 applicants</span>
                            <button class="btn primary" onclick="loadMoreApplicants()">Load More</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeQuickActionModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }

        function processBatchScheduling() {
            showNotification('Processing batch interview scheduling...', 'info');
            setTimeout(() => {
                showNotification('Interview invitations sent to 8 candidates!', 'success');
                closeQuickActionModal();
            }, 2000);
        }

        function exportApplicantsList() {
            showNotification('Preparing applicants list for export...', 'info');
            
            // Call the working export function after a brief delay
            setTimeout(() => {
                exportApplicants();
            }, 800);
        }

        function sendBulkMessage() {
            const selectedCount = document.querySelectorAll('.compose-modal tbody input[type="checkbox"]:checked').length;
            if (selectedCount === 0) {
                showNotification('Please select at least one applicant', 'warning');
                return;
            }
            showNotification(`Preparing bulk message for ${selectedCount} applicants...`, 'info');
            // In a real application, this would open a message composer
        }

        function loadMoreApplicants() {
            showNotification('Loading more applicants...', 'info');
            // In a real application, this would fetch and append more applicants
            setTimeout(() => {
                showNotification('Additional applicants loaded', 'success');
            }, 1000);
        }

        // Applicant status management
        function updateApplicantStatus(applicantId, newStatus) {
            const dropdown = event.target;
            const card = dropdown.closest('.applicant-card');
            const statusIndicator = card.querySelector('.status-indicator');
            const applicantName = card.querySelector('.applicant-name').textContent;
            
            // Add loading state
            setButtonLoading(dropdown, true);
            statusIndicator.classList.add('status-updating');
            
            // Simulate API call
            setTimeout(() => {
                // Update status indicator
                statusIndicator.classList.remove('new', 'reviewing', 'interviewing', 'shortlisted', 'offered', 'hired', 'rejected', 'withdrawn');
                statusIndicator.classList.add(newStatus);
                statusIndicator.textContent = getStatusDisplayText(newStatus);
                
                // Update card data attribute
                card.dataset.status = newStatus;
                
                // Add visual feedback
                card.classList.add('status-changed');
                setTimeout(() => {
                    card.classList.remove('status-changed');
                }, 500);
                
                // Remove loading state
                setButtonLoading(dropdown, false);
                statusIndicator.classList.remove('status-updating');
                
                // Show success notification
                showToast(`${applicantName} status updated to ${getStatusDisplayText(newStatus)}`, 'success');
                
                // Update filters if active
                if (isFiltersActive()) {
                    filterApplicants();
                }
                
                // Log status change (in real app, this would be sent to backend)
                logStatusChange(applicantId, newStatus, applicantName);
                
            }, 800);
        }

        function getStatusDisplayText(status) {
            const statusMap = {
                'new': 'New',
                'reviewing': 'Under Review',
                'interviewing': 'Interviewing',
                'shortlisted': 'Shortlisted',
                'offered': 'Offered',
                'hired': 'Hired',
                'rejected': 'Rejected',
                'withdrawn': 'Withdrawn'
            };
            return statusMap[status] || status;
        }

        function logStatusChange(applicantId, newStatus, applicantName) {
            const timestamp = new Date().toISOString();
            console.log(`Status Change Log: ${applicantName} (ID: ${applicantId}) -> ${newStatus} at ${timestamp}`);
            
            // In a real application, this would be sent to the backend
            // trackStatusChange(applicantId, newStatus, timestamp);
        }

        function isFiltersActive() {
            const searchTerm = document.getElementById('applicant-search').value.trim();
            const specialtyFilter = document.getElementById('specialty-filter').value;
            const experienceFilter = document.getElementById('experience-filter').value;
            const ratingFilter = document.getElementById('rating-filter').value;
            
            return searchTerm || specialtyFilter || experienceFilter || ratingFilter;
        }

        // Bulk status update functionality
        function showBulkStatusUpdate() {
            const checkedApplicants = document.querySelectorAll('.applicant-card input[type="checkbox"]:checked');
            
            if (checkedApplicants.length === 0) {
                showToast('Please select applicants to update', 'error');
                return;
            }

            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 500px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);">Bulk Status Update</h2>
                        <button onclick="closeBulkStatusModal()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Update status for ${checkedApplicants.length} selected applicant${checkedApplicants.length > 1 ? 's' : ''}:
                        </p>
                        
                        <select id="bulk-status-select" style="
                            width: 100%;
                            padding: 0.75rem;
                            border: 1px solid var(--border-color);
                            border-radius: 0.5rem;
                            font-size: 1rem;
                        ">
                            <option value="">Select new status...</option>
                            <option value="reviewing">Under Review</option>
                            <option value="interviewing">Interviewing</option>
                            <option value="shortlisted">Shortlisted</option>
                            <option value="offered">Offered</option>
                            <option value="hired">Hired</option>
                            <option value="rejected">Rejected</option>
                            <option value="withdrawn">Withdrawn</option>
                        </select>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                        <button onclick="closeBulkStatusModal()" style="
                            padding: 0.75rem 1.5rem;
                            background: var(--surface-color);
                            border: 1px solid var(--border-color);
                            border-radius: 0.5rem;
                            cursor: pointer;
                            font-weight: 500;
                        ">Cancel</button>
                        <button onclick="applyBulkStatusUpdate()" style="
                            padding: 0.75rem 1.5rem;
                            background: var(--primary-color);
                            color: white;
                            border: none;
                            border-radius: 0.5rem;
                            cursor: pointer;
                            font-weight: 500;
                        ">Update Status</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeBulkStatusModal() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }

        function applyBulkStatusUpdate() {
            const newStatus = document.getElementById('bulk-status-select').value;
            
            if (!newStatus) {
                showToast('Please select a status', 'error');
                return;
            }

            const checkedApplicants = document.querySelectorAll('.applicant-card input[type="checkbox"]:checked');
            const button = event.target;
            
            setButtonLoading(button, true);
            
            // Update each selected applicant
            checkedApplicants.forEach((checkbox, index) => {
                const card = checkbox.closest('.applicant-card');
                const applicantId = card.dataset.applicantId || index + 1;
                const dropdown = card.querySelector('.status-dropdown');
                
                setTimeout(() => {
                    dropdown.value = newStatus;
                    updateApplicantStatus(applicantId, newStatus);
                }, index * 200); // Stagger updates for visual effect
            });
            
            setTimeout(() => {
                setButtonLoading(button, false);
                showToast(`Bulk status update completed for ${checkedApplicants.length} applicants`, 'success');
                closeBulkStatusModal();
            }, checkedApplicants.length * 200 + 1000);
        }

        // Add status filter to existing filter functionality
        function addStatusFilter() {
            const statusFilter = document.createElement('select');
            statusFilter.id = 'status-filter';
            statusFilter.onchange = filterApplicants;
            statusFilter.style.cssText = `
                padding: 0.75rem 1rem;
                border: 1px solid var(--border-color);
                border-radius: 0.5rem;
                font-size: 0.9rem;
                min-width: 120px;
            `;
            
            statusFilter.innerHTML = `
                <option value="">All Statuses</option>
                <option value="new">New</option>
                <option value="reviewing">Under Review</option>
                <option value="interviewing">Interviewing</option>
                <option value="shortlisted">Shortlisted</option>
                <option value="offered">Offered</option>
                <option value="hired">Hired</option>
                <option value="rejected">Rejected</option>
                <option value="withdrawn">Withdrawn</option>
            `;
            
            // Add to filter container
            const filterContainer = document.querySelector('.filter-container');
            if (filterContainer) {
                filterContainer.insertBefore(statusFilter, filterContainer.lastElementChild);
            }
        }

        // Applicant filtering functionality
        function filterApplicants() {
            const searchTerm = document.getElementById('applicant-search').value.toLowerCase().trim();
            const specialtyFilter = document.getElementById('specialty-filter').value;
            const experienceFilter = document.getElementById('experience-filter').value;
            const ratingFilter = document.getElementById('rating-filter').value;
            const statusFilter = document.getElementById('status-filter')?.value || '';
            
            const applicantCards = document.querySelectorAll('.applicant-card');
            let visibleCount = 0;
            
            applicantCards.forEach(card => {
                const name = card.dataset.name.toLowerCase();
                const specialty = card.dataset.specialty;
                const experience = parseInt(card.dataset.experience);
                const rating = parseFloat(card.dataset.rating);
                const position = card.dataset.position.toLowerCase();
                const status = card.dataset.status;
                
                let showCard = true;
                
                // Search filter
                if (searchTerm && !name.includes(searchTerm) && !position.includes(searchTerm) && !specialty.includes(searchTerm.replace(/[\s-]/g, '-'))) {
                    showCard = false;
                }
                
                // Specialty filter
                if (specialtyFilter && specialty !== specialtyFilter) {
                    showCard = false;
                }
                
                // Experience filter
                if (experienceFilter) {
                    const [min, max] = experienceFilter.split('-').map(n => n.replace('+', ''));
                    if (experienceFilter === '15+') {
                        if (experience < 15) showCard = false;
                    } else {
                        const minExp = parseInt(min);
                        const maxExp = parseInt(max);
                        if (experience < minExp || (maxExp && experience > maxExp)) {
                            showCard = false;
                        }
                    }
                }
                
                // Rating filter
                if (ratingFilter) {
                    const minRating = parseFloat(ratingFilter);
                    if (rating < minRating) {
                        showCard = false;
                    }
                }
                
                // Status filter
                if (statusFilter && status !== statusFilter) {
                    showCard = false;
                }
                
                // Show/hide card
                if (showCard) {
                    card.style.display = 'flex';
                    card.style.animation = 'fadeIn 0.3s ease';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Update filter results
            updateFilterResults(visibleCount, applicantCards.length);
            
            // Update pagination with filtered results
            updateApplicantsPagination();
        }

        function updateFilterResults(visibleCount, totalCount) {
            const filterResults = document.getElementById('filter-results');
            const filterCount = document.getElementById('filter-count');
            const applicantsGrid = document.getElementById('applicants-grid');
            
            // Check if any filters are active
            const searchTerm = document.getElementById('applicant-search').value.trim();
            const specialtyFilter = document.getElementById('specialty-filter').value;
            const experienceFilter = document.getElementById('experience-filter').value;
            const ratingFilter = document.getElementById('rating-filter').value;
            const statusFilter = document.getElementById('status-filter')?.value || '';
            
            const hasActiveFilters = searchTerm || specialtyFilter || experienceFilter || ratingFilter || statusFilter;
            
            if (hasActiveFilters) {
                filterResults.style.display = 'block';
                
                if (visibleCount === 0) {
                    // Show no results message
                    filterCount.textContent = `No applicants match your filters`;
                    filterCount.style.color = 'var(--error-color)';
                    
                    // Add a helpful empty state message
                    if (!document.getElementById('no-results-message')) {
                        const noResultsMsg = document.createElement('div');
                        noResultsMsg.id = 'no-results-message';
                        noResultsMsg.style.cssText = `
                            text-align: center;
                            padding: 3rem 2rem;
                            color: var(--text-secondary);
                            font-size: 1.1rem;
                        `;
                        noResultsMsg.innerHTML = `
                            <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                            <div style="margin-bottom: 0.5rem;">No applicants found</div>
                            <div style="font-size: 0.9rem;">Try adjusting your search criteria or <a href="#" onclick="clearApplicantFilters(); return false;" style="color: var(--primary-color); text-decoration: underline;">clear all filters</a></div>
                        `;
                        applicantsGrid.appendChild(noResultsMsg);
                    }
                } else {
                    // Show normal count
                    filterCount.textContent = `${visibleCount} of ${totalCount} applicants shown`;
                    filterCount.style.color = 'var(--text-secondary)';
                    
                    // Remove no results message if it exists
                    const noResultsMsg = document.getElementById('no-results-message');
                    if (noResultsMsg) {
                        noResultsMsg.remove();
                    }
                }
            } else {
                // No filters active, hide the filter results
                filterResults.style.display = 'none';
                
                // Remove no results message if it exists
                const noResultsMsg = document.getElementById('no-results-message');
                if (noResultsMsg) {
                    noResultsMsg.remove();
                }
            }
        }

        function clearApplicantFilters() {
            // Clear all filter inputs
            document.getElementById('applicant-search').value = '';
            document.getElementById('specialty-filter').value = '';
            document.getElementById('experience-filter').value = '';
            document.getElementById('rating-filter').value = '';
            
            // Show all cards
            const applicantCards = document.querySelectorAll('.applicant-card');
            applicantCards.forEach(card => {
                card.style.display = 'flex';
            });
            
            // Hide filter results
            document.getElementById('filter-results').style.display = 'none';
            
            // Update pagination
            updateApplicantsPagination();
            
            // Show success toast
            showToast('Filters cleared', 'info');
        }

        function updateApplicantsPagination() {
            const applicantCards = document.querySelectorAll('.applicant-card');
            const visibleCards = Array.from(applicantCards).filter(card => card.style.display !== 'none');
            
            // Update the pagination data
            applicantsPagination.filteredItems = visibleCards;
            applicantsPagination.totalItems = visibleCards.length;
            applicantsPagination.currentPage = 1; // Reset to first page
            
            // Update the display
            updateApplicantsDisplay();
        }

        // Advanced search functionality
        function showAdvancedSearch() {
            const modal = document.createElement('div');
            modal.className = 'compose-modal';
            modal.innerHTML = `
                <div class="compose-modal-content" style="max-width: 600px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: var(--primary-color);"> Advanced Search</h2>
                        <button onclick="closeAdvancedSearch()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: var(--text-secondary);
                        "></button>
                    </div>
                    
                    <div style="display: grid; gap: 1.5rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Location</label>
                            <input type="text" id="location-search" placeholder="City, State" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Minimum Rating</label>
                                <select id="min-rating" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="">Any Rating</option>
                                    <option value="3">3.0+</option>
                                    <option value="3.5">3.5+</option>
                                    <option value="4">4.0+</option>
                                    <option value="4.5">4.5+</option>
                                    <option value="5">5.0</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Application Date</label>
                                <select id="date-filter" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                                    <option value="">Any Time</option>
                                    <option value="today">Today</option>
                                    <option value="week">This Week</option>
                                    <option value="month">This Month</option>
                                    <option value="quarter">This Quarter</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Keywords</label>
                            <input type="text" id="keyword-search" placeholder="Skills, certifications, experience..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem;">
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1rem;">
                            <button onclick="closeAdvancedSearch()" style="
                                padding: 0.75rem 1.5rem;
                                background: var(--surface-color);
                                border: 1px solid var(--border-color);
                                border-radius: 0.5rem;
                                cursor: pointer;
                                font-weight: 500;
                            ">Cancel</button>
                            <button onclick="applyAdvancedSearch()" style="
                                padding: 0.75rem 1.5rem;
                                background: var(--primary-color);
                                color: white;
                                border: none;
                                border-radius: 0.5rem;
                                cursor: pointer;
                                font-weight: 500;
                            ">Apply Filters</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeAdvancedSearch() {
            const modal = document.querySelector('.compose-modal');
            if (modal) {
                modal.remove();
            }
        }

        function applyAdvancedSearch() {
            // This would apply advanced search filters
            showToast('Advanced search filters applied', 'success');
            closeAdvancedSearch();
        }

        // Demo functions to showcase loading states
        function demoSkeletonLoading() {
            const applicantsGrid = document.querySelector('.applicants-grid');
            if (applicantsGrid) {
                showSkeletonLoader(applicantsGrid, 'card', 3);
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        }

        function demoTableSkeleton() {
            const jobsTableBody = document.querySelector('.jobs-table tbody');
            if (jobsTableBody) {
                showSkeletonLoader(jobsTableBody, 'table', 5);
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        }

        function demoChartLoading() {
            const chartContainer = document.querySelector('.analytics-section .chart-container');
            if (chartContainer) {
                showChartLoading(chartContainer);
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        }

        function demoStatsSkeleton() {
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid) {
                showSkeletonLoader(statsGrid, 'stat', 4);
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Remove console.log to avoid potential issues
                // Initialize core functions with error handling
                
                // Add status filter to applicant controls
                addStatusFilter();
                
                // Initialize pagination
                if (typeof initializePagination === 'function') {
                    initializePagination();
                }
                
                // Initialize performance chart
                if (typeof drawPerformanceChart === 'function') {
                    try {
                        drawPerformanceChart('month');
                        console.log('Performance chart initialized successfully');
                    } catch (error) {
                        console.error('Error initializing performance chart:', error);
                    }
                }
                
                // Initialize loading states for interactive elements
                if (typeof initializeLoadingStates === 'function') {
                    initializeLoadingStates();
                }
                
                // Update dashboard stats to match actual data
                if (typeof updateDashboardStats === 'function') {
                    updateDashboardStats();
                }
                
                // Add KPI refresh controls
                if (typeof addKPIRefreshControls === 'function') {
                    addKPIRefreshControls();
                }
                
                // Initialize message center with first message selected
                const firstMessage = document.querySelector('.message-item');
                if (firstMessage) {
                    const messageId = firstMessage.getAttribute('data-message-id');
                    if (messageId && typeof selectMessage === 'function') {
                        selectMessage(messageId);
                    }
                }
                
                // Ensure page is visible after initialization
                document.body.style.visibility = 'visible';
                document.body.style.opacity = '1';
                
            } catch (error) {
                console.error('Dashboard initialization error:', error);
                // Ensure page is still visible even if there's an error
                document.body.style.visibility = 'visible';
                document.body.style.opacity = '1';
            }
        });
        
        // Fallback to ensure page becomes visible
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.body.style.visibility = 'visible';
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>


</body>
</html>
